import{F as e}from"./Form-qXqhdZYE.js";import{u as t}from"./useForm-DOc6O2io.js";import{d as o,q as a,P as l,o as m,i as r,a as s,k as n}from"./index-xKMN8uKn.js";import{u as p}from"./useValidator-XGMP-dW-.js";const i=o({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(o,{expose:i}){const{required:u}=p(),c=o,{t:d}=n(),{formRegister:f,formMethods:P}=t(),{setValues:b,getFormData:v,getElFormExpose:g,setSchema:h}=P,x=a([{field:"title",label:d("exampleDemo.title"),component:"Input",formItemProps:{rules:[u()]},colProps:{span:24}},{field:"author",label:d("exampleDemo.author"),component:"Input",formItemProps:{rules:[u()]}},{field:"display_time",label:d("exampleDemo.displayTime"),component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"},formItemProps:{rules:[u()]}},{field:"importance",label:d("exampleDemo.importance"),component:"Select",formItemProps:{rules:[u()]},componentProps:{options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},{field:"pageviews",label:d("exampleDemo.pageviews"),component:"InputNumber",value:0,formItemProps:{rules:[u()]}},{field:"content",component:"Editor",colProps:{span:24},componentProps:{defaultHtml:"",onChange:e=>{b({content:e.getHtml()})}},label:d("exampleDemo.content")}]),D=a({title:[u()],author:[u()],importance:[u()],pageviews:[u()],display_time:[u()],content:[u()]});return l((()=>c.currentRow),(e=>{e&&(b(e),h([{field:"content",path:"componentProps.defaultHtml",value:e.content}]))}),{deep:!0,immediate:!0}),i({submit:async()=>{const e=await g();if(await(null==e?void 0:e.validate().catch((e=>{})))){return await v()}}}),(t,o)=>(m(),r(s(e),{rules:D,onRegister:s(f),schema:x},null,8,["rules","onRegister","schema"]))}});export{i as _};
