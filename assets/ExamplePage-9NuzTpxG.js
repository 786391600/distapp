import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-LUywar4U.js";import{_ as t}from"./Search.vue_vue_type_script_setup_true_lang-MrVKQEor.js";import{d as a,u as s,r as o,q as i,e as l,D as r,F as n,a as p,o as m,i as d,w as c,f as u,A as g,t as j,O as _,N as f,k as h}from"./index--pceygKG.js";import{_ as b}from"./Table.vue_vue_type_script_lang-AngMgYvV.js";import{g as x,d as y}from"./index-4cCKXi-e.js";import{u as v}from"./useTable-4QfqZwDv.js";import{u as w}from"./useEmitt-yauzzbvb.js";import{u as S}from"./useCrudSchemas-7i1ec988.js";import{r as P}from"./routeParams-2Vh4L2uS.js";import"./el-card-zp4HlqaN.js";import"./el-popper-EURigUz_.js";import"./Form-tYfrJN9o.js";import"./el-col-yORQDGD5.js";import"./el-tag-Rw2zc9lI.js";import"./el-checkbox-p_RkrV8q.js";import"./isEqual-TTXRHWIj.js";import"./el-input-number-ntu1GDuY.js";import"./el-pagination-37-I5V9K.js";import"./debounce-alTl-32R.js";import"./el-divider-qyTWypZy.js";import"./el-tree-j0QP5RJp.js";import"./index-Z3yhY4El.js";import"./InputPassword-hSaIHEzr.js";import"./style.css_vue_type_style_index_0_src_true_lang-K-gfIi0D.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-1GlLcAo3.js";import"./IconPicker-c8RQTGXB.js";import"./tsxHelper-G-EkZRFQ.js";import"./useForm-jgevvVIP.js";import"./useIcon-1V7VrYR0.js";import"./el-image-viewer-vRsXBmKc.js";import"./el-dropdown-item-_g5g_9ch.js";import"./refs-vhGtvD15.js";import"./index-rnG57GUA.js";import"./index-BNHVlY9g.js";import"./tree-1FtpebiE.js";const I={class:"mb-10px"};function D(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!f(e)}const k=a({name:"AccountPage",__name:"ExamplePage",setup(a){const f=P(),{push:k}=s(),C=o([]),z=o({}),E=e=>{z.value=e,q()},{tableRegister:A,tableState:L,tableMethods:R}=v({fetchDataApi:async()=>{const{currentPage:e,pageSize:t}=L,a=await x({pageIndex:p(e),pageSize:p(t),...p(z)});return{list:a.data.list,total:a.data.total}},fetchDelApi:async()=>!!(await y({ids:p(C)}))}),{loading:F,dataList:O,total:T,currentPage:N,pageSize:U}=L,{getList:q,getElTableExpose:H,delList:J}=R;q(),w({name:"getList",callback:e=>{"add"===e&&(N.value=1),q()}});const{t:M}=h(),W=i([{field:"companyName",label:"服务商名称",search:{component:"Input"},form:{hidden:!1},detail:{hidden:!1}},{field:"accountName",label:"账户编号",search:{component:"Input"},form:{hidden:!1},detail:{hidden:!1}},{field:"accountId",label:"账户ID",search:{component:"Input"},form:{component:"Input",colProps:{span:50}},detail:{span:24}},{field:"password",label:"密码",search:{hidden:!0},table:{hidden:!0}},{field:"action",width:"260px",label:M("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let t,a,s;return l(n,null,[l(r,{type:"primary",onClick:()=>Q(e.row,"edit")},D(t=M("exampleDemo.edit"))?t:{default:()=>[t]}),l(r,{type:"success",onClick:()=>Q(e.row,"detail")},D(a=M("exampleDemo.detail"))?a:{default:()=>[a]}),l(r,{type:"danger",onClick:()=>K(e.row)},D(s=M("exampleDemo.del"))?s:{default:()=>[s]})])}}}}]),{allSchemas:$}=S(W),B=()=>{k("/account/example-add")},G=o(!1),K=async e=>{const t=await H();C.value=e?[e.id]:(null==t?void 0:t.getSelectionRows().map((e=>e.id)))||[],G.value=!0,await J(p(C).length).finally((()=>{G.value=!1}))},Q=(e,t)=>{f.setParams(e.id,e),k(`/account/example-${t}?id=${e.id}`)};return(a,s)=>(m(),d(p(e),null,{default:c((()=>[l(p(t),{schema:p($).searchSchema,onSearch:E,onReset:E},null,8,["schema"]),u("div",I,[l(p(r),{type:"primary",onClick:B},{default:c((()=>[g(j(p(M)("exampleDemo.add")),1)])),_:1})]),l(p(b),{pageSize:p(U),"onUpdate:pageSize":s[0]||(s[0]=e=>_(U)?U.value=e:null),currentPage:p(N),"onUpdate:currentPage":s[1]||(s[1]=e=>_(N)?N.value=e:null),columns:p($).tableColumns,data:p(O),loading:p(F),pagination:{total:p(T)},onRegister:p(A)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{k as default};
