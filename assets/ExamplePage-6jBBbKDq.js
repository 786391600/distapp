import{_ as e}from"./ContentWrap.vue_vue_type_script_setup_true_lang-LUywar4U.js";import{_ as t}from"./Search.vue_vue_type_script_setup_true_lang-MrVKQEor.js";import{d as a,u as i,r as s,q as o,e as l,D as r,F as n,a as p,o as m,i as d,w as u,f as c,A as g,t as j,O as _,N as f,k as h}from"./index--pceygKG.js";import{_ as b}from"./Table.vue_vue_type_script_lang-AngMgYvV.js";import{g as x,d as y}from"./index-efGn3nF6.js";import{u as v}from"./useTable-4QfqZwDv.js";import{u as S}from"./useEmitt-yauzzbvb.js";import{u as w}from"./useCrudSchemas-7i1ec988.js";import{f as D}from"./dateUtil-SldEJzBR.js";import{r as P}from"./routeParams-2Vh4L2uS.js";import"./el-card-zp4HlqaN.js";import"./el-popper-EURigUz_.js";import"./Form-tYfrJN9o.js";import"./el-col-yORQDGD5.js";import"./el-tag-Rw2zc9lI.js";import"./el-checkbox-p_RkrV8q.js";import"./isEqual-TTXRHWIj.js";import"./el-input-number-ntu1GDuY.js";import"./el-pagination-37-I5V9K.js";import"./debounce-alTl-32R.js";import"./el-divider-qyTWypZy.js";import"./el-tree-j0QP5RJp.js";import"./index-Z3yhY4El.js";import"./InputPassword-hSaIHEzr.js";import"./style.css_vue_type_style_index_0_src_true_lang-K-gfIi0D.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-1GlLcAo3.js";import"./IconPicker-c8RQTGXB.js";import"./tsxHelper-G-EkZRFQ.js";import"./useForm-jgevvVIP.js";import"./useIcon-1V7VrYR0.js";import"./el-image-viewer-vRsXBmKc.js";import"./el-dropdown-item-_g5g_9ch.js";import"./refs-vhGtvD15.js";import"./index-rnG57GUA.js";import"./index-BNHVlY9g.js";import"./tree-1FtpebiE.js";const k={class:"mb-10px"};function C(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!f(e)}const E=a({name:"ExamplePage",__name:"ExamplePage",setup(a){const f=P(),{push:E}=i(),z=s([]),I=s({}),T=e=>{I.value=e,Y()},{tableRegister:F,tableState:L,tableMethods:R}=v({fetchDataApi:async()=>{const{currentPage:e,pageSize:t}=L,a=await x({pageIndex:p(e),pageSize:p(t),...p(I)});return{list:a.data.list,total:a.data.total}},fetchDelApi:async()=>!!(await y({ids:p(z)}))}),{loading:A,dataList:H,total:M,currentPage:O,pageSize:U}=L,{getList:Y,getElTableExpose:q,delList:J}=R;Y(),S({name:"getList",callback:e=>{"add"===e&&(O.value=1),Y()}});const{t:W}=h(),$=o([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"title",label:"岗位名称",search:{hidden:!1,component:"Input"},form:{hidden:!0},detail:{hidden:!0}},{field:"enterprise",label:"所属企业",search:{hidden:!0}},{field:"createTime",label:"添加时间",search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}},table:{slots:{default:e=>D(e.createTime)}}},{field:"action",width:"260px",label:W("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let t,a,i;return l(n,null,[l(r,{type:"primary",onClick:()=>Q(e.row,"edit")},C(t=W("exampleDemo.edit"))?t:{default:()=>[t]}),l(r,{type:"success",onClick:()=>Q(e.row,"detail")},C(a=W("exampleDemo.detail"))?a:{default:()=>[a]}),l(r,{type:"danger",onClick:()=>N(e.row)},C(i=W("exampleDemo.del"))?i:{default:()=>[i]})])}}}}]),{allSchemas:B}=w($),G=()=>{E("/station/example-add")},K=s(!1),N=async e=>{const t=await q();z.value=e?[e.id]:(null==t?void 0:t.getSelectionRows().map((e=>e.id)))||[],K.value=!0,await J(p(z).length).finally((()=>{K.value=!1}))},Q=(e,t)=>{f.setParams(e.id,e),E(`/station/example-${t}?id=${e.id}`)};return(a,i)=>(m(),d(p(e),null,{default:u((()=>[l(p(t),{schema:p(B).searchSchema,onSearch:T,onReset:T},null,8,["schema"]),c("div",k,[l(p(r),{type:"primary",onClick:G},{default:u((()=>[g(j(p(W)("exampleDemo.add")),1)])),_:1}),l(p(r),{loading:K.value,type:"danger",onClick:i[0]||(i[0]=e=>N(null))},{default:u((()=>[g(j(p(W)("exampleDemo.del")),1)])),_:1},8,["loading"])]),l(p(b),{pageSize:p(U),"onUpdate:pageSize":i[1]||(i[1]=e=>_(U)?U.value=e:null),currentPage:p(O),"onUpdate:currentPage":i[2]||(i[2]=e=>_(O)?O.value=e:null),columns:p(B).tableColumns,data:p(H),loading:p(A),pagination:{total:p(M)},onRegister:p(F)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])])),_:1}))}});export{E as default};
