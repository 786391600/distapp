(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopAdd"],{"07e8":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cube-page",class:e.type},[i("header",{staticClass:"header"},[i("h1",[e._v(e._s(e.title))]),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),i("div",{staticClass:"header-edit"},[e._t("edit")],2)]),i("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[i("section",{directives:[{name:"show",rawName:"v-show",value:e.desc,expression:"desc"}],staticClass:"desc"},[e._t("desc",[e._v(e._s(e.desc))])],2),i("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},r=[],n=i("d225"),s=i("b0b4"),c=i("308d"),o=i("6bb5"),l=i("4e2b"),u=i("9ab4"),d=i("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(c["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"back",value:function(){this.$router.back()}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])()],b.prototype,"msg",void 0),Object(u["a"])([Object(d["b"])({default:"",required:!0})],b.prototype,"title",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"type",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"desc",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"content",void 0),Object(u["a"])([Object(d["b"])({default:!0})],b.prototype,"isBack",void 0),b=Object(u["a"])([d["a"]],b);var f=b,p=f,v=(i("ca73"),i("2877")),m=Object(v["a"])(p,a,r,!1,null,"0717ebb4",null);t["a"]=m.exports},"3fd0":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page",{attrs:{title:e.title,type:"white"}},[i("div",{attrs:{slot:"edit"},slot:"edit"},[i("span",{on:{click:e.submitClick}},[e._v("完成")])]),i("div",{attrs:{slot:"content"},slot:"content"},[i("cube-form",{ref:"cubeForm",attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[i("cube-form-item",{attrs:{field:e.fields[0]}}),i("cube-form-item",{attrs:{field:e.fields[1]}}),i("imageUpload",{model:{value:e.model.imgUrlList,callback:function(t){e.$set(e.model,"imgUrlList",t)},expression:"model.imgUrlList"}})],1)],1)])},r=[],n=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),s=i("d225"),c=i("b0b4"),o=i("308d"),l=i("6bb5"),u=i("4e2b"),d=i("9ab4"),b=i("60a3"),f=i("07e8"),p=i("5102"),v=i("7618");i("3b2b"),i("a481");function m(e){if(!e&&"object"!==Object(v["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach(function(i){e[i]&&"object"===Object(v["a"])(e[i])?t[i]=m(e[i]):t[i]=e[i]}),t}var h=i("7078");function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var g=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.title="店铺新增",e.model={name:"",distribution:!1,imgUrlList:[]},e.fields=[{type:"input",modelKey:"name",label:"商店名称",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur"},{type:"switch",modelKey:"distribution",label:"是否配送"}],e.options={scrollToInvalidField:!0,layout:"standard"},e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"validateHandler",value:function(){console.log("validateHandler")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var i,a=this.$store.state.userInfo.business;i=y({},this.model,{businessId:a}),this.$store.dispatch("addOrUpdateShop",i).then(function(e){if(e.success){e.data?h["a"].$emit("shopList",{type:"add",data:e.data}):h["a"].$emit("shopList",{type:"update",data:i}),t.$router.back();var a=t.$createToast({txt:"保存成功",time:3e3,type:"txt"});a.show()}})}},{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"mounted",value:function(){var e=this.$route.params;if(e.id){this.title="店铺修改";e.id,e.name,e.distribution,e.businessId;this.$set(this,"model",m(e))}}},{key:"submitClick",value:function(){this.$refs.cubeForm.submit()}}]),t}(b["c"]);g=Object(d["a"])([Object(b["a"])({components:{page:f["a"],imageUpload:p["a"]}})],g);var j=g,k=j,w=(i("6724"),i("2877")),$=Object(w["a"])(k,a,r,!1,null,"ae695080",null);t["default"]=$.exports},5102:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-upload"},[i("div",{staticClass:"file-upload-box"},[e._l(e.imageArr,function(t,a){return i("div",{key:t,staticClass:"img-box"},[i("img",{staticClass:"imgPriview",attrs:{src:t},on:{click:function(t){return e.handleImgsClick(a)}}}),i("i",{staticClass:"cubeic-wrong",on:{click:function(i){return e.imageRemove(t,a)}}})])}),i("cube-upload",{ref:"upload",attrs:{action:e.action,"simultaneous-uploads":1},on:{"files-added":e.filesAdded,"file-removed":e.fileRemove,"file-success":e.fileSuccess},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[i("div",{staticClass:"clear-fix"},[i("cube-upload-btn",{attrs:{multiple:!1}},[i("div",{staticClass:"cube-upload-btn-def"},[i("i")])])],1)])],2)])},r=[],n=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),s=i("d225"),c=i("b0b4"),o=i("308d"),l=i("6bb5"),u=i("4e2b"),d=i("9ab4"),b=i("60a3");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,a)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var v=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.fileUrl="http://img.beijixiong.club:4869/",e.imageArr=[],e.action={target:"/fileUpload",data:{token:"rwwXO0wQq5SBEqP7"}},e.isUploading=!0,e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"upload",value:function(){this.isUploading=!0,this.$refs.upload.start()}},{key:"pause",value:function(){this.isUploading=!1,this.$refs.upload.pause()}},{key:"retry",value:function(){this.$refs.upload.retry()}},{key:"filesAdded",value:function(e){var t=!1,i=1048576;for(var a in e){var r=e[a];r.size>i&&(r.ignore=!0,t=!0)}t&&this.$createToast({type:"warn",time:2e3,txt:"文件需要小于1M"}).show()}},{key:"fileRemove",value:function(e){if(e.response&&e.response.md5){var t=this.fileUrl+e.response.md5,i=this.imageArr.indexOf(t);i>-1&&this.imageArr.splice(i,1)}}},{key:"fileSuccess",value:function(e){var t=e.response.md5,i=this.fileUrl+t,a=this.imageArr.indexOf(i);-1===a&&this.imageArr.push(i)}},{key:"handleImgsClick",value:function(e){var t=this;this.initialIndex=e;var i={$props:{imgs:this.imageArr,initialIndex:"initialIndex",loop:!1},$events:{change:function(e){t.initialIndex=e}}};this.$createImagePreview(p({},i)).show()}},{key:"imageArrChange",value:function(e){this.$emit("input",e)}},{key:"valueChange",value:function(e){e.length>0&&this.$set(this,"imageArr",e)}},{key:"imageRemove",value:function(e,t){var i=this;this.$store.dispatch("removeImage",{url:e}).then(function(a){a.success&&(console.log(e),console.log("图片删除成功！")),i.imageArr.splice(t,1)})}}]),t}(b["c"]);Object(d["a"])([Object(b["b"])({default:[]})],v.prototype,"value",void 0),Object(d["a"])([Object(b["d"])("imageArr")],v.prototype,"imageArrChange",null),Object(d["a"])([Object(b["d"])("value",{immediate:!0})],v.prototype,"valueChange",null),v=Object(d["a"])([Object(b["a"])({components:{},filters:{}})],v);var m=v,h=m,O=(i("753f"),i("2877")),y=Object(O["a"])(h,a,r,!1,null,null,null);t["a"]=y.exports},"561c":function(e,t,i){},6724:function(e,t,i){"use strict";var a=i("561c"),r=i.n(a);r.a},7078:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("2b0e"),r=new a["default"]},"753f":function(e,t,i){"use strict";var a=i("7952"),r=i.n(a);r.a},7952:function(e,t,i){},b0b4:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("85f2"),r=i.n(a);function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r()(e,a.key,a)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},b13e:function(e,t,i){},ca73:function(e,t,i){"use strict";var a=i("b13e"),r=i.n(a);r.a}}]);
//# sourceMappingURL=shopAdd.55d3065e.js.map