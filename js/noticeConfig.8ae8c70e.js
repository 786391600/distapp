(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["noticeConfig"],{"07e8":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cube-page",class:e.type},[i("header",{staticClass:"header"},[i("h1",[e._v(e._s(e.title))]),i("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),i("div",{staticClass:"header-edit"},[e._t("edit")],2)]),i("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[i("section",{directives:[{name:"show",rawName:"v-show",value:e.desc,expression:"desc"}],staticClass:"desc"},[e._t("desc",[e._v(e._s(e.desc))])],2),i("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},s=[],n=i("d225"),o=i("b0b4"),c=i("308d"),l=i("6bb5"),r=i("4e2b"),u=i("9ab4"),d=i("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(r["a"])(t,e),Object(o["a"])(t,[{key:"back",value:function(){this.$router.back()}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])()],b.prototype,"msg",void 0),Object(u["a"])([Object(d["b"])({default:"",required:!0})],b.prototype,"title",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"type",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"desc",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"content",void 0),Object(u["a"])([Object(d["b"])({default:!0})],b.prototype,"isBack",void 0),b=Object(u["a"])([d["a"]],b);var f=b,v=f,p=(i("724a"),i("2877")),h=Object(p["a"])(v,a,s,!1,null,"758695be",null);t["a"]=h.exports},"2f6b":function(e,t,i){},"2fdc":function(e,t,i){},"3af1":function(e,t,i){"use strict";var a=i("2fdc"),s=i.n(a);s.a},"724a":function(e,t,i){"use strict";var a=i("2f6b"),s=i.n(a);s.a},b0b4:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var a=i("85f2"),s=i.n(a);function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),s()(e,a.key,a)}}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},c88e:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("7618");i("3b2b"),i("a481");var s=function e(t){var i;if("object"===Object(a["a"])(t))if(null===t)i=null;else if(t instanceof Date)i=t;else if(t instanceof Array){i=[];for(var s=0,n=t.length;s<n;s++)i.push(e(t[s]))}else for(var o in i={},t)i[o]=e(t[o]);else i=t;return i}},ebb7:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page",{attrs:{title:e.className}},[i("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e._l(e.noticeList,function(t,a){return i("div",{staticClass:"notice-box"},[i("div",{staticClass:"title"},[e._v(e._s(t.title))]),i("div",{staticClass:"oprate"},[i("div",{staticClass:"oprate-btn btn-delete",on:{click:function(t){return e.deleteNotice(a)}}},[e._v("删除")])])])}),e.showBtn?i("cube-button",{on:{click:e.saveSchoolInfo}},[e._v("保存")]):e._e(),i("cube-popup",{ref:"myPopup",attrs:{type:"my-popup",maskClosable:!0,center:!1,position:"top"},on:{"mask-click":e.maskClick}},[i("addNotice",{ref:"addNotice",on:{submit:e.submit}})],1),i("div",{staticClass:"add-btn",on:{click:function(t){return e.showPopup("myPopup")}}},[e._v("添加")])],2)])},s=[],n=i("d225"),o=i("b0b4"),c=i("308d"),l=i("6bb5"),r=i("4e2b"),u=i("9ab4"),d=i("60a3"),b=i("07e8"),f=i("3a45"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cube-form",{ref:"addForm",attrs:{model:e.model,schema:e.schema,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}})},p=[],h=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.validity={},e.valid=void 0,e.model={title:""},e.schema={groups:[{legend:"新增公告",fields:[{type:"textarea",modelKey:"title",label:"公告内容",props:{placeholder:"请输入"},rules:{required:!0},debounce:100}]},{fields:[{type:"submit",label:"保存"}]}]},e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(r["a"])(t,e),Object(o["a"])(t,[{key:"submitHandler",value:function(e){e.preventDefault(),this.$emit("submit",this.model)}},{key:"validateHandler",value:function(e){this.validity=e.validity,this.valid=e.valid,console.log("validity",e.validity,e.valid,e.dirty,e.firstInvalidFieldIndex)}},{key:"reset",value:function(e){this.$refs.addForm.reset()}}]),t}(d["c"]);h=Object(u["a"])([d["a"]],h);var m=h,y=m,O=i("2877"),j=Object(O["a"])(y,v,p,!1,null,"fe0e5680",null),k=j.exports,_=i("c88e"),w=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.className="公告配置",e.showBtn=!1,e.noticeList=Object(_["a"])(e.noticeConfig),e}return Object(r["a"])(t,e),Object(o["a"])(t,[{key:"showPopup",value:function(e){this.maskClick();var t=this.$refs[e];t.show()}},{key:"hidePopup",value:function(e){var t=this.$refs[e];t.hide()}},{key:"maskClick",value:function(){this.$refs.addNotice.reset()}},{key:"submit",value:function(e){this.noticeList.push({title:e.title,url:""}),this.showBtn=!0,this.hidePopup("myPopup")}},{key:"deleteNotice",value:function(e){this.noticeList.splice(e,1),this.showBtn=!0}},{key:"saveSchoolInfo",value:function(){var e=this;this.$store.dispatch("updateSchoolInfo",{schoolId:this.schoolInfo.id,type:"noticeConfig",value:this.noticeList}).then(function(t){t.success&&(e.showBtn=!1),e.$store.commit("SET_SCHOOL_INFO_BY_TYPE",{type:"noticeConfig",value:e.noticeList}),console.log(t,"eeeeeeeeeeeeeeeeeeeeeeeee")})}},{key:"noticeConfig",get:function(){return this.$store.state.schoolInfo.noticeConfig||[]}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(d["c"]);w=Object(u["a"])([Object(d["a"])({components:{page:b["a"],pageView:f["a"],addNotice:k}})],w);var C=w,g=C,$=(i("3af1"),Object(O["a"])(g,a,s,!1,null,"3da52b91",null));t["default"]=$.exports}}]);
//# sourceMappingURL=noticeConfig.8ae8c70e.js.map