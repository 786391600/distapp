(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["businessTags"],{"07e8":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cube-page",class:e.type},[s("header",{staticClass:"header"},[s("h1",[e._v(e._s(e.title))]),s("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),s("div",{staticClass:"header-edit"},[e._t("edit")],2)]),s("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[s("section",{directives:[{name:"show",rawName:"v-show",value:e.desc,expression:"desc"}],staticClass:"desc"},[e._t("desc",[e._v(e._s(e.desc))])],2),s("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},a=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"back",value:function(){this.$router.back()}}]),t}(d["c"]);Object(l["a"])([Object(d["b"])()],b.prototype,"msg",void 0),Object(l["a"])([Object(d["b"])({default:"",required:!0})],b.prototype,"title",void 0),Object(l["a"])([Object(d["b"])({default:""})],b.prototype,"type",void 0),Object(l["a"])([Object(d["b"])({default:""})],b.prototype,"desc",void 0),Object(l["a"])([Object(d["b"])({default:""})],b.prototype,"content",void 0),Object(l["a"])([Object(d["b"])({default:!0})],b.prototype,"isBack",void 0),b=Object(l["a"])([d["a"]],b);var h=b,p=h,f=(s("724a"),s("2877")),v=Object(f["a"])(p,i,a,!1,null,"758695be",null);t["a"]=v.exports},"2f6b":function(e,t,s){},"33cf":function(e,t,s){},"35c0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[e.visible?s("div",{staticClass:"edit-box"},[e._t("default")],2):e._e()])},a=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){}},{key:"hide",value:function(){this.$emit("update:visible",!1)}}]),t}(d["c"]);Object(l["a"])([Object(d["b"])({default:!1})],b.prototype,"visible",void 0),b=Object(l["a"])([Object(d["a"])({components:{}})],b);var h=b,p=h,f=(s("a034"),s("2877")),v=Object(f["a"])(p,i,a,!1,null,"7997ce46",null);t["a"]=v.exports},"47b6":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page",{attrs:{title:e.className}},[s("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"user-list"},e._l(e.businessUserList,function(t,i){return s("div",{key:t.phone,staticClass:"user-box"},[s("div",{staticClass:"title"},[e._v(e._s(t.name||"店员"+i))]),s("div",{staticClass:"oprate"},[s("span",{on:{click:function(s){return e.testSend(t)}}},[e._v("测试推送")]),"13934691550"!==t.bindPhone?s("span",{staticClass:"delete",on:{click:function(s){return e.deleteUser(t)}}},[e._v("删除店员")]):e._e()])])}),0),s("div",{staticClass:"add-user",on:{click:e.addUser}},[e._v("+添加店员")]),s("editBox",{attrs:{visible:e.showEditbox},on:{"update:visible":function(t){e.showEditbox=t}}},[s("addForm",{attrs:{shopId:e.shopId,shopName:e.shopName},on:{cancel:function(t){e.showEditbox=!1},success:e.addSuccess}})],1)],1)])},a=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),b=s("07e8"),h=s("51f3"),p=s("35c0"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("cube-form",{attrs:{model:e.model,schema:e.schema,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}})},v=[],m=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(o["a"])(this,Object(r["a"])(t).apply(this,arguments)),e.validity={},e.valid=void 0,e.model={name:e.shopName+"-店员"+parseInt(10*Math.random(),10),phone:"",shopId:e.shopId},e.schema={groups:[{legend:"店员添加",fields:[{type:"input",modelKey:"name",label:"名称",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur",messages:{required:"店员名称必填"}},{type:"input",modelKey:"phone",label:"手机号",props:{placeholder:"请输入"},rules:{required:!0,type:"tel"},messages:{required:"手机号必填"},trigger:"blur"}]},{fields:[{type:"submit",label:"保存"},{type:"reset",label:"取消"}]}]},e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),console.log("submit",e),console.log(this.model),this.$store.dispatch("addBusinessUser",this.model).then(function(e){var s="添加成功！";e.message&&(s=e.message);var i=t.$createToast({txt:s,type:"text"});i.show(),t.$emit("success")})}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(d["c"]);Object(l["a"])([Object(d["b"])({default:""})],m.prototype,"shopId",void 0),Object(l["a"])([Object(d["b"])({default:""})],m.prototype,"shopName",void 0),m=Object(l["a"])([Object(d["a"])({name:"addForm"})],m);var O=m,j=O,y=s("2877"),g=Object(y["a"])(j,f,v,!1,null,"5160f65b",null),k=g.exports,w=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(o["a"])(this,Object(r["a"])(t).apply(this,arguments)),e.className="店员管理",e.businessUserList=[],e.showEditbox=!1,e}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"mounted",value:function(){this.getBusinessUserList()}},{key:"addUser",value:function(){this.businessUserList.length>=30?this.$createDialog({type:"confirm",title:"最多添加30个店员",onConfirm:function(e){}}).show():this.showEditbox=!0}},{key:"getBusinessUserList",value:function(){var e=this;this.$store.dispatch("getBusinessUserList",{shopId:this.shopId}).then(function(t){t.success&&(e.businessUserList=t.data)})}},{key:"testSend",value:function(e){var t=this;e.qwUserId?this.$store.dispatch("sendTestMessage",{qwUserId:e.qwUserId}).then(function(e){e.success&&t.$createDialog({type:"confirm",title:"消息已推送，未收到请联系管理员。",onConfirm:function(e){}}).show()}):this.$createDialog({type:"confirm",title:"店员绑定异常，请联系管理员处理",onConfirm:function(e){}}).show()}},{key:"addSuccess",value:function(){this.showEditbox=!1,this.$createDialog({type:"confirm",title:"添加成功",onConfirm:function(e){}}).show(),this.getBusinessUserList()}},{key:"deleteUser",value:function(e){var t=this;this.$store.dispatch("deleteUserByPhoneOrId",{qwUserId:e.qwUserId||"",phone:e.bindPhone||"",shopId:this.shopId}).then(function(e){e.success?(t.$createDialog({type:"confirm",title:"删除成功",onConfirm:function(e){}}).show(),t.getBusinessUserList()):t.$createDialog({type:"confirm",title:e.message,onConfirm:function(e){}}).show()})}},{key:"shopId",get:function(){return this.$route.query.shopId}},{key:"shopName",get:function(){return this.$route.query.shopName}}]),t}(d["c"]);w=Object(l["a"])([Object(d["a"])({components:{page:b["a"],rightBox:h["a"],editBox:p["a"],addForm:k}})],w);var _=w,x=_,C=(s("f666"),Object(y["a"])(x,i,a,!1,null,"126e371a",null));t["default"]=C.exports},"51f3":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"right-box"},e._l(e.list,function(t,i){return s("div",{key:i,staticClass:"box",on:{click:function(s){return e.boxClick(t.action)}}},[t.icon?s("i",{class:["iconfont",t.icon]}):s("span",[e._v(e._s(t.text))])])}),0)},a=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"boxClick",value:function(e){this.$emit("click",e)}}]),t}(d["c"]);Object(l["a"])([Object(d["b"])()],b.prototype,"list",void 0),b=Object(l["a"])([d["a"]],b);var h=b,p=h,f=(s("b493"),s("2877")),v=Object(f["a"])(p,i,a,!1,null,"1bd23a4e",null);t["a"]=v.exports},7019:function(e,t,s){},"724a":function(e,t,s){"use strict";var i=s("2f6b"),a=s.n(i);a.a},a034:function(e,t,s){"use strict";var i=s("33cf"),a=s.n(i);a.a},a387:function(e,t,s){},b493:function(e,t,s){"use strict";var i=s("a387"),a=s.n(i);a.a},f666:function(e,t,s){"use strict";var i=s("7019"),a=s.n(i);a.a}}]);
//# sourceMappingURL=businessTags.ce914b0c.js.map