(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commodityClass"],{"002c":function(t,e,s){"use strict";var i=s("23cf"),o=s.n(i);o.a},"21f3":function(t,e,s){"use strict";var i=s("e4df"),o=s.n(i);o.a},2358:function(t,e,s){"use strict";var i=s("614f"),o=s.n(i);o.a},"23cf":function(t,e,s){},2866:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"commodity-class-box"},[s("div",{staticClass:"commodity-class-box-tit"},[s("businessinfo",{attrs:{Info:t.shopInfo}})],1),s("div",{staticClass:"commodity-class-box-top"},[s("div",{staticClass:"commodity-class",scopedSlots:t._u([{key:"pulldown",fn:function(e){return t.customPullDown?[e.pullDownRefresh?s("div",{staticClass:"cube-pulldown-wrapper",style:e.pullDownStyle},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.beforePullDown,expression:"props.beforePullDown"}],staticClass:"before-trigger",style:{paddingTop:e.bubbleY+"px"}},[s("span",{class:{rotate:e.bubbleY>t.pullDownRefreshThreshold-40}},[t._v("↓")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.beforePullDown,expression:"!props.beforePullDown"}],staticClass:"after-trigger"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isPullingDown,expression:"props.isPullingDown"}],staticClass:"loading"},[s("cube-loading")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPullingDown,expression:"!props.isPullingDown"}],staticClass:"text"},[s("span",{staticClass:"refresh-text"},[t._v("Refresh success")])])])]):t._e()]:void 0}}],null,!0)},[s("selectTab",{attrs:{tabNumObj:t.selectNumClass},on:{change:t.tabChange,shopChange:t.getBusinissInfo}})],1),s("div",{staticClass:"scroll-list-wrap",scopedSlots:t._u([{key:"pulldown",fn:function(e){return t.customPullDown?[e.pullDownRefresh?s("div",{staticClass:"cube-pulldown-wrapper",style:e.pullDownStyle},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.beforePullDown,expression:"props.beforePullDown"}],staticClass:"before-trigger",style:{paddingTop:e.bubbleY+"px"}},[s("span",{class:{rotate:e.bubbleY>t.pullDownRefreshThreshold-40}},[t._v("↓")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.beforePullDown,expression:"!props.beforePullDown"}],staticClass:"after-trigger"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isPullingDown,expression:"props.isPullingDown"}],staticClass:"loading"},[s("cube-loading")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPullingDown,expression:"!props.isPullingDown"}],staticClass:"text"},[s("span",{staticClass:"refresh-text"},[t._v("Refresh success")])])])]):t._e()]:void 0}}],null,!0)},[s("div",{staticClass:"className"},[s("span",[t._v(t._s(t.className))])]),s("ul",{staticClass:"foods-wrapper"},[t._l(t.items,function(e,i){return s("li",{key:i,staticClass:"food-item border-1px",on:{click:function(s){return t.commodityShow(e,i)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"100",height:"100",src:e.imgUrlList&&e.imgUrlList.length>0?e.imgUrlList[0]+"?w=100":""}})]),s("div",{staticClass:"food-content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"description"},[t._v(t._s(e.description))]),s("div",{staticClass:"Price-Box"},[s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(e.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(e.oldPrice))])]),s("div",{staticClass:"num"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.num&&e.num>0,expression:"food.num && food.num > 0"}],staticClass:"cubeic-remove",on:{click:function(s){return s.stopPropagation(),t.foodReduce(e,i)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.num&&e.num>0,expression:"food.num && food.num > 0"}],staticClass:"num-center"},[t._v("\n                    "+t._s(t._f("getFoodNum")(e))+"\n                  ")]),s("i",{staticClass:"cubeic-add",on:{click:function(s){return s.stopPropagation(),t.foodAdd(e,i)}}})])])])])}),s("li",{staticClass:"buttom-box"})],2)])]),s("payBox")],1)},o=[],a=s("d225"),n=s("b0b4"),c=s("308d"),r=s("6bb5"),l=s("4e2b"),u=s("9ab4"),d=s("60a3"),m=s("319c"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderPayBox"},[s("payshow",{attrs:{visible:t.payShowVisible},on:{cancel:t.payShowCancel}}),s("toolbar",{attrs:{actions:t.actions},on:{click:t.clickHandler}})],1)},f=[],p=(s("ac6a"),s("a481"),s("28a5"),s("18a0")),v=s.n(p),b=s("da92"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar"},[s("div",{staticClass:"shopping",on:{click:t.shoppingClick}},[s("i",{staticClass:"iconfont icongouwuche"}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.commodityNum>0,expression:"commodityNum > 0"}],staticClass:"shopping-num"},[t._v(t._s(t.commodityNum))])]),s("div",{staticClass:"text"},[t._v(t._s(t.actions[0].text))]),s("div",{staticClass:"btn",on:{click:t.paymentClick}},[t._v("去结算")])])},g=[],C=function(t){function e(){return Object(a["a"])(this,e),Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"mounted",value:function(){}},{key:"paymentClick",value:function(){this.$emit("click",{action:"payButtonClickHandle"})}},{key:"shoppingClick",value:function(){this.commodityNum>0&&this.$emit("click",{action:"shoppingClick"})}},{key:"commodityNum",get:function(){var t=0;return this.$store.state.selectCommodityList.forEach(function(e){return t+=e.num}),t}}]),e}(d["c"]);Object(u["a"])([Object(d["b"])({default:""})],C.prototype,"actions",void 0),C=Object(u["a"])([Object(d["a"])({components:{},filters:{}})],C);var w=C,O=w,k=(s("2358"),s("2877")),_=Object(k["a"])(O,y,g,!1,null,"707f4b00",null),j=_.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"cube-action-sheet-fade"}},[s("cube-popup",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],class:{"cube-action-sheet_picker":t.pickerStyle},attrs:{type:"action-sheet",center:!1,mask:!0,"z-index":t.zIndex},on:{"mask-click":t.maskClick}},[s("transition",{attrs:{name:"cube-action-sheet-move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"payshow-commodityList"},[s("selectCommodity",{attrs:{isShow:t.isVisible,isAtOrder:!1}})],1)])],1)],1)},I=[],$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"select-commodity":!0}},[s("div",{staticClass:"select-commodity-top"},[s("span",{staticClass:"select-commodity-top-tit"},[t._v("购物车"),s("span",[t._v("（共"+t._s(t.commodityNum)+"件商品）")])]),s("span",{on:{click:t.emptyCommodity}},[s("i",{staticClass:"iconfont iconicon_huabanfuben"}),t._v("清空购物车")])]),s("div",{ref:"selectlist",staticClass:"select-commodity-list",style:t.autoHeight},[s("cube-scroll",{ref:"scroll",attrs:{data:t.selectCommodityList,options:t.options}},[s("ul",{staticClass:"foods-wrapper"},t._l(t.selectCommodityList,function(e,i){return s("li",{staticClass:"food-item border-1px"},[s("div",{staticClass:"icon"},[s("img",{attrs:{width:"65",height:"65",src:e.imgUrlList&&e.imgUrlList.length>0?e.imgUrlList[0]:""}})]),s("div",{staticClass:"food-content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"description"},[t._v(t._s(e.description))]),s("div",{staticClass:"Price-Box"},[s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("￥"+t._s(e.price))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(e.oldPrice))])]),s("div",{staticClass:"num"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.num&&e.num>0,expression:"food.num && food.num > 0"}],staticClass:"cubeic-remove",on:{click:function(s){return t.foodReduce(e,i)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.num&&e.num>0,expression:"food.num && food.num > 0"}],staticClass:"num-center"},[t._v(t._s(t._f("getFoodNum")(e)))]),s("i",{staticClass:"cubeic-add",on:{click:function(s){return t.foodAdd(e,i)}}})])])])])}),0)])],1),s("div",{staticClass:"payshow-bottom"})])},S=[],D=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.autoHeight={height:"auto"},t}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"getFoodPrice",value:function(t){return"¥"+b["a"].strip(t.num*t.price)}},{key:"foodAdd",value:function(t,e){var s=t.num||0;this.$set(this.selectCommodityList[e],"num",s+1),this.$store.commit("SET_SELECT_COMMODITY_LIST",{type:"add",item:this.selectCommodityList[e]});var i=t.class;this.setClassNum(i,"add")}},{key:"setClassNum",value:function(t,e){this.$store.commit("SET_SELECT_COMMODITY_NUM",{classId:t,type:e})}},{key:"foodReduce",value:function(t,e){t.num;var s=t.num-1;this.$set(this.selectCommodityList[e],"num",s),this.$store.commit("SET_SELECT_COMMODITY_LIST",{type:"reduce",item:this.selectCommodityList[e]});var i=t.class;this.setClassNum(i,"reduce")}},{key:"isShowChange",value:function(t){console.log("iiiiiiiiiiiiiiiiiii"),this.selectCommodityList.length>2?(this.autoHeight.height="274px",t&&this.$nextTick(function(){this.$refs.scroll.refresh()})):this.autoHeight.height="auto"}},{key:"isShowChange",value:function(t){this.selectCommodityList.length>2?(this.autoHeight.height="274px",t&&this.$nextTick(function(){this.$refs.scroll.refresh()})):this.autoHeight.height="auto"}},{key:"emptyCommodity",value:function(){this.$store.commit("EMPTY_COMMODITY")}},{key:"options",get:function(){return{pullDownRefresh:!1,pullUpLoad:!1,scrollbar:!0}}},{key:"selectCommodityList",get:function(){return this.$store.state.selectCommodityList}},{key:"commodityNum",get:function(){var t=0;return this.$store.state.selectCommodityList.forEach(function(e){return t+=e.num}),t}}]),e}(d["c"]);Object(u["a"])([Object(d["b"])({default:!1})],D.prototype,"isShow",void 0),Object(u["a"])([Object(d["d"])("selectCommodityList")],D.prototype,"isShowChange",null),Object(u["a"])([Object(d["d"])("isShow")],D.prototype,"isShowChange",null),D=Object(u["a"])([Object(d["a"])({components:{},filters:{getFoodNum:function(t){return t.num&&t.num>0?t.num:0}}})],D);var N=D,T=N,L=(s("aff0"),Object(k["a"])(T,$,S,!1,null,"4d59605e",null)),P=L.exports,E="cube-action-sheet",U="select",M="cancel",B={name:E,data:function(){return{zIndex:50,isVisible:!1}},props:{pickerStyle:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}},computed:{selectCommodityList:function(){return this.$store.state.selectCommodityList}},mounted:function(){var t=this;this.$watch("visible",function(e,s){e?t.show():s&&!t._createAPI_reuse&&t.hide()},{immediate:!0})},methods:{maskClick:function(){this.cancel()},cancel:function(){this.$emit(M)},itemClick:function(t,e){this.hide(),this.$emit(U,t,e)},show:function(){this.isVisible=!0},hide:function(){this.isVisible=!1}},watch:{selectCommodityList:function(t){t.length<=0&&this.cancel()}},components:{selectCommodity:P}},R=B,A=(s("61b3"),s("4b40"),Object(k["a"])(R,x,I,!1,null,null,null)),Y=A.exports,V=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.indicator=!1,t.model={phone:"",openid:""},t.actions=[{text:"合计 ¥00.00",action:"moreMoney"},{type:"button",text:'<div class="payButton">立即购买</div>',action:"payButtonClickHandle"}],t.page=1,t.commodityId="",t.commodityObj={},t.commodityNum=1,t.totalCost=0,t.userInfo={},t.openid="",t.payButtonClick=!1,t.weixinInfo={},t.payShowVisible=!1,t}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"activated",value:function(){this.$store.commit("SET_SESSION_ID","noSession"),this.$store.state.isUserInfoBack?this.$set(this,"userInfo",this.$store.state.commodityUserInfo):this.pageInit()}},{key:"selectCommodityListChanged",value:function(t){this.actions[0].text="合计 ¥"+t}},{key:"getUserInfo",value:function(){var t=this,e=this.$route.query;if(e.code){var s=this["$createToast"]({time:0,txt:"数据获取中..."});s.show(),this.$store.dispatch("getCommodityUserInfo",{code:e.code}).then(function(e){e.success&&e.data.openid&&(t.openid=e.data.openid,t.getWeiXinConfig(),e.data.userInfo&&(t.userInfo=e.data.userInfo),e.data.weixinInfo&&(t.weixinInfo=e.data.weixinInfo)),s.hide()})}else console.log("不是微信登陆")}},{key:"pageInit",value:function(){var t=this.$route.query,e=t.state;if(e){var s=e.split("@");"commodity"===s[0]&&(this.commodityId=s[1].replace(/\'/g,""))}t.code&&this.getUserInfo()}},{key:"getCommodityById",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getCommodityById",{id:this.commodityId}).then(function(s){s.success&&t.$set(t,"commodityObj",s.data),e.hide()})}},{key:"fenToYuan",value:function(t){return"number"!==typeof t||isNaN(t)?null:"合计 ¥"+b["a"].strip((t/100).toFixed(2))}},{key:"getWeiXinConfig",value:function(){var t=window.location.href;this.$store.dispatch("getWeixinConfig",{url:t}).then(function(t){if(t.success){var e=t.data;v.a.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["chooseWXPay"]})}v.a.ready(function(){console.log("ready========")}),v.a.error(function(t){console.log(t),console.log("errrrrrrrrrrrrrr")})})}},{key:"clickHandler",value:function(t){t.action&&this[t.action](t)}},{key:"payButtonClickHandle",value:function(){var t=[];if(this.$store.state.selectCommodityList.forEach(function(e){var s={};s.id=e.id,s.name=e.name,s.num=e.num,s.price=e.price,t.push(s)}),t.length<=0){var e=this.$createToast({txt:"请选择商品",type:"error"});e.show()}else this.$router.push({path:"/atOrder",query:{userInfo:this.userInfo,openid:this.openid}})}},{key:"shoppingClick",value:function(){this.payShowVisible=!this.payShowVisible}},{key:"payShowCancel",value:function(){this.payShowVisible=!1}},{key:"selectCommodityPrice",get:function(){var t=0;return this.$store.state.selectCommodityList.forEach(function(e){t+=e.price*e.num}),b["a"].strip(t)}},{key:"computedMsg",get:function(){return"computed "+this.propB}}]),e}(d["c"]);Object(u["a"])([Object(d["d"])("selectCommodityPrice")],V.prototype,"selectCommodityListChanged",null),Object(u["a"])([Object(d["b"])({default:"default value"})],V.prototype,"propB",void 0),V=Object(u["a"])([Object(d["a"])({components:{toolbar:j,payshow:Y},filters:{getFormatDate:function(t){return new Date(t).getFullYear()+"年"+(new Date(t).getMonth()+1)+"月"+new Date(t).getDate()},fenToYuan:function(t){return"number"!==typeof t||isNaN(t)?null:"¥"+(t/100).toFixed(2)}}})],V);var F=V,H=F,q=(s("e5c3"),Object(k["a"])(H,h,f,!1,null,"44ebd133",null)),z=q.exports,W=s("5102"),X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"selectTab-box"},t._l(t.items,function(e,i){return s("li",{class:{active:i===t.index},on:{click:function(e){return t.boxClick(i)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.tabNumObj[e.id]>0,expression:"tabNumObj[item.id] > 0"}],staticClass:"tip"},[t._v(t._s(t.tabNumObj[e.id]))]),s("div",[t._v(t._s(e.name))])])}),0)},J=[],Q=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.index=0,t.businessId="",t.shopId="",t.items=[],t}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"mounted",value:function(){this.$store.commit("SET_SESSION_ID","noSession")}},{key:"boxClick",value:function(t){this.index=t;var e=this.items[this.index];this.$emit("change",e)}},{key:"setBusiness",value:function(){var t=this.$route.query,e=t.state.split("$")[0],s=e.split("@")[1],i=t.state.split("$")[1],o=i.split("@")[1],a=t.userId;this.$store.commit("SET_MTUSER_ID",a),this.$store.commit("SET_BUSINESS_ID",s),this.businessId=s,this.shopId=o}},{key:"getCommodityClassList",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getCommodityClassList",{business:this.businessId,shopId:this.shopId}).then(function(s){if(s.success){var i=s.data.list;t.$set(t,"items",i),t.$emit("shopChange",s.data.shopInfo),t.boxClick(0)}e.hide()})}},{key:"activated",value:function(){this.setBusiness(),this.getCommodityClassList()}}]),e}(d["c"]);Object(u["a"])([Object(d["b"])()],Q.prototype,"tabNumObj",void 0),Q=Object(u["a"])([Object(d["a"])({components:{},filters:{}})],Q);var G=Q,K=G,Z=(s("21f3"),Object(k["a"])(K,X,J,!1,null,"9310ff88",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"businessInfo"},[s("div",{staticClass:"head"},[s("img",{attrs:{src:t.Info.imgUrlList[0]+"?w=100",alt:""}})]),s("div",{staticClass:"info"},[s("p",{staticClass:"name"},[t._v(t._s(t.Info.name))]),s("p",{staticClass:"address"},[t._v(t._s(t.Info.address))])])])},st=[],it=function(t){function e(){return Object(a["a"])(this,e),Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"businessInfo",get:function(){return this.Info}}]),e}(d["c"]);Object(u["a"])([Object(d["b"])({default:{imgUrlList:[]}})],it.prototype,"Info",void 0),it=Object(u["a"])([Object(d["a"])({components:{},filters:{}})],it);var ot=it,at=ot,nt=(s("9a0b"),Object(k["a"])(at,et,st,!1,null,"bd77b47e",null)),ct=nt.exports,rt=function(t){function e(){var t;return Object(a["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.items=[],t.pullDownRefresh=!1,t.pullDownRefreshThreshold=60,t.pullDownRefreshStop=40,t.pullDownRefreshTxt="Refresh success",t.pullUpLoad=!1,t.pullUpLoadThreshold=0,t.pullUpLoadMoreTxt="Load more",t.pullUpLoadNoMoreTxt="No more data",t.customPullDown=!1,t.shopInfo={},t.classId="",t.className="",t}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"foodAdd",value:function(t,e){var s=t.num||0;this.$set(this.items[e],"num",s+1),this.$store.commit("SET_SELECT_COMMODITY_LIST",{type:"add",item:this.items[e]}),this.updateClassNum("add")}},{key:"foodReduce",value:function(t,e){t.num;var s=t.num-1;this.$set(this.items[e],"num",s),this.$store.commit("SET_SELECT_COMMODITY_LIST",{type:"reduce",item:this.items[e]}),this.updateClassNum("reduce")}},{key:"updateClassNum",value:function(t){this.$store.commit("SET_SELECT_COMMODITY_NUM",{classId:this.classId,type:t})}},{key:"tabChange",value:function(t){this.classId=t.id,this.$set(this,"className",t.name),this.getCommodityListByClass(t)}},{key:"getCommodityListByClass",value:function(t){var e=this,s=t.id,i=this["$createToast"]({time:0,txt:"商品获取中..."});this.classCommodity[s]&&this.classCommodity[s].length>0?this.$set(this,"items",this.classCommodity[s]):this.$store.dispatch("getCommodityListByClass",{class:s}).then(function(t){if(t.success){var o=t.data.list;e.$set(e,"items",o),e.$store.commit("SET_CLASS_COMMODITY",{classId:s,list:o})}i.hide()})}},{key:"getBusinissInfo",value:function(t){document.title=t.name,this.$store.commit("SET_SHOP_INFO",t),console.log("向小程序发送消息了"),v.a.miniProgram.postMessage({data:{shopInfo:t}}),this.$set(this,"shopInfo",t)}},{key:"commodityShow",value:function(t,e){var s=this;this.$createDialog({type:"confirm",confirmBtn:{text:"添加",active:!0},cancelBtn:{text:"关闭",active:!1,disabled:!1,href:"javascript:;"},onConfirm:function(){s.foodAdd(t,e)}},function(e){return[e("div",{class:{"my-title":!0},slot:"title"},[e("img",{attrs:{src:t.imgUrlList[0]+"?w=200"}}),e("p",t.name)]),e("p",{class:{"my-content":!0},slot:"content"},"价格:"+t.price+"元/"+t.unit)]}).show()}},{key:"shareClick",value:function(){var t='type=commodity&commodityList=[{"id":"bc8f37d0-fb41-11ea-8a76-532bd2785fca","name":"巨峰葡萄","num":1,"price":"0.1","imgUrl":"http://img.beijixiong.club:4869/931477297cfd002e44a3906cc8bc2e9c"},{"id":"14067010-0244-11eb-a74a-f3981c383190","name":"哈密瓜","num":1,"price":"0.01","imgUrl":"http://img.beijixiong.club:4869/2a4d2566daa8c8bd5a80ce22eafbb447"}]&fee=0.11&businessId=8a146790-f97e-11ea-8165-3111824eebe8';v.a.miniProgram.navigateTo({url:"/pages/jumbprocess/index?"+t})}},{key:"destroyed",value:function(){this.$store.commit("SET_CLASS_COMMODITY",{isEmpty:!0})}},{key:"classCommodity",get:function(){return this.$store.state.classCommodity}},{key:"selectNumClass",get:function(){return this.$store.state.selectNumClass}},{key:"options",get:function(){return{pullDownRefresh:this.pullDownRefreshObj,pullUpLoad:this.pullUpLoadObj,scrollbar:!0}}},{key:"pullDownRefreshObj",get:function(){var t=parseInt(this.pullDownRefreshThreshold);return!!this.pullDownRefresh&&{threshold:t,txt:this.pullDownRefreshTxt}}}]),e}(d["c"]);rt=Object(u["a"])([Object(d["a"])({name:"CommodityClass",components:{banner:m["a"],payBox:z,selectTab:tt,imageUpload:W["a"],businessinfo:ct},filters:{getFormatDate:function(t){return new Date(t).getFullYear()+"年"+(new Date(t).getMonth()+1)+"月"+new Date(t).getDate()+"号"},getFoodNum:function(t){return t.num&&t.num>0?t.num:0}}})],rt);var lt=rt,ut=lt,dt=(s("002c"),s("8438"),Object(k["a"])(ut,i,o,!1,null,"04cabf8e",null));e["default"]=dt.exports},"48d7":function(t,e,s){},"4b40":function(t,e,s){"use strict";var i=s("4fee"),o=s.n(i);o.a},"4fee":function(t,e,s){},5102:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-upload"},[s("div",{staticClass:"file-upload-box"},[t._l(t.imageArr,function(e,i){return s("div",{key:e,staticClass:"img-box"},[s("img",{staticClass:"imgPriview",attrs:{src:e},on:{click:function(e){return t.handleImgsClick(i)}}}),s("i",{staticClass:"cubeic-wrong",on:{click:function(s){return t.imageRemove(e,i)}}})])}),s("cube-upload",{ref:"upload",attrs:{action:t.action,"simultaneous-uploads":1},on:{"files-added":t.filesAdded,"file-removed":t.fileRemove,"file-success":t.fileSuccess},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[s("div",{staticClass:"clear-fix"},[s("cube-upload-btn",{attrs:{multiple:!1}},[s("div",{staticClass:"cube-upload-btn-def"},[s("i")])])],1)])],2)])},o=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("d225"),c=s("b0b4"),r=s("308d"),l=s("6bb5"),u=s("4e2b"),d=s("9ab4"),m=s("60a3");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,i)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(s,!0).forEach(function(e){Object(a["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var p=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(r["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.fileUrl="http://img.beijixiong.club:4869/",t.imageArr=[],t.action={target:"/fileUpload",data:{token:"rwwXO0wQq5SBEqP7"}},t.isUploading=!0,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"upload",value:function(){this.isUploading=!0,this.$refs.upload.start()}},{key:"pause",value:function(){this.isUploading=!1,this.$refs.upload.pause()}},{key:"retry",value:function(){this.$refs.upload.retry()}},{key:"filesAdded",value:function(t){var e=!1,s=1048576;for(var i in t){var o=t[i];o.size>s&&(o.ignore=!0,e=!0)}e&&this.$createToast({type:"warn",time:2e3,txt:"文件需要小于1M"}).show()}},{key:"fileRemove",value:function(t){if(t.response&&t.response.md5){var e=this.fileUrl+t.response.md5,s=this.imageArr.indexOf(e);s>-1&&this.imageArr.splice(s,1)}}},{key:"fileSuccess",value:function(t){var e=t.response.md5,s=this.fileUrl+e,i=this.imageArr.indexOf(s);-1===i&&this.imageArr.push(s)}},{key:"handleImgsClick",value:function(t){var e=this;this.initialIndex=t;var s={$props:{imgs:this.imageArr,initialIndex:"initialIndex",loop:!1},$events:{change:function(t){e.initialIndex=t}}};this.$createImagePreview(f({},s)).show()}},{key:"imageArrChange",value:function(t){this.$emit("input",t)}},{key:"valueChange",value:function(t){t.length>0&&this.$set(this,"imageArr",t)}},{key:"imageRemove",value:function(t,e){var s=this;this.$store.dispatch("removeImage",{url:t}).then(function(i){i.success&&(console.log(t),console.log("图片删除成功！")),s.imageArr.splice(e,1)})}}]),e}(m["c"]);Object(d["a"])([Object(m["b"])({default:[]})],p.prototype,"value",void 0),Object(d["a"])([Object(m["d"])("imageArr")],p.prototype,"imageArrChange",null),Object(d["a"])([Object(m["d"])("value",{immediate:!0})],p.prototype,"valueChange",null),p=Object(d["a"])([Object(m["a"])({components:{},filters:{}})],p);var v=p,b=v,y=(s("753f"),s("2877")),g=Object(y["a"])(b,i,o,!1,null,null,null);e["a"]=g.exports},"5d3b":function(t,e,s){},"614f":function(t,e,s){},"61b3":function(t,e,s){"use strict";var i=s("48d7"),o=s.n(i);o.a},"753f":function(t,e,s){"use strict";var i=s("7952"),o=s.n(i);o.a},7952:function(t,e,s){},"830c":function(t,e,s){},8438:function(t,e,s){"use strict";var i=s("f389"),o=s.n(i);o.a},"9a0b":function(t,e,s){"use strict";var i=s("e7cd"),o=s.n(i);o.a},aff0:function(t,e,s){"use strict";var i=s("830c"),o=s.n(i);o.a},e4df:function(t,e,s){},e5c3:function(t,e,s){"use strict";var i=s("5d3b"),o=s.n(i);o.a},e7cd:function(t,e,s){},f389:function(t,e,s){}}]);
//# sourceMappingURL=commodityClass.b230279b.js.map