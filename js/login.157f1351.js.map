{"version":3,"sources":["webpack:///./src/views/login/index.vue?c3dc","webpack:///./src/views/login/index.vue?c99e","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?7c33","webpack:///./src/views/login/index.vue?2966","webpack:///./src/views/login/index.vue?a089"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","model","options","on","submitHandler","fields","getVerificationCode","_v","_s","time","_e","staticRenderFns","Login","arguments","phone","verificationCode","openid","type","modelKey","label","props","placeholder","rules","required","isVerification","getBindingInfo","query","$route","code","toast","txt","show","$store","dispatch","then","response","success","data","sessionId","commit","userInfo","$router","replace","path","hide","console","log","e","preventDefault","reqData","Object","assign","resData","sendSms","isBind","content","icon","message","Vue","__decorate","Component","components","component"],"mappings":"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","file":"js/login.157f1351.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2d573de6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2d573de6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_vm._m(0),_c('cube-form',{staticClass:\"home-form\",attrs:{\"model\":_vm.model,\"options\":_vm.options},on:{\"submit\":_vm.submitHandler}},[_c('cube-form-group',[_c('div',[_c('cube-form-item',{attrs:{\"field\":_vm.fields[0]}})],1),(_vm.isVerification)?_c('div',{staticClass:\"verificationCode\"},[_c('div',[_c('cube-form-item',{attrs:{\"field\":_vm.fields[1]}})],1),_c('div',{staticClass:\"verificationCode-button\"},[_c('cube-button',{attrs:{\"outline\":true,\"primary\":true,\"inline\":true},on:{\"click\":_vm.getVerificationCode}},[(_vm.sendMsgDisabled)?_c('span',[_vm._v(_vm._s(_vm.time+'秒后获取'))]):_c('span',[_vm._v(\"获取验证码\")])])],1)]):_vm._e()]),_c('cube-form-group',[_c('cube-button',{staticClass:\"submit\",attrs:{\"type\":\"submit\"}},[_vm._v(\"立即绑定\")])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"header\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"请输入手机号\")]),_c('span',{staticClass:\"tip\"},[_vm._v(\"请输入商务对接的手机号\")]),_c('span',{staticClass:\"tip\"},[_vm._v(\"平台目前不支持对外注册，请联系：13934691550\")])])}]\n\nexport { render, staticRenderFns }","import { __decorate } from \"tslib\";\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nlet Login = class Login extends Vue {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.options = {\r\n            phone: '',\r\n            verificationCode: ''\r\n        };\r\n        this.model = { phone: '', openid: '' };\r\n        this.fields = [{ type: 'input', modelKey: 'phone', label: '手机号', props: { placeholder: '请输入号码' }, rules: { required: true, type: 'tel' } }, { type: 'input', modelKey: 'verificationCode', label: '验证码', props: { placeholder: '请输入', type: 'text' }, rules: { required: true } }];\r\n        this.isVerification = false;\r\n    }\r\n    mounted() {\r\n        this.getBindingInfo();\r\n    }\r\n    getBindingInfo() {\r\n        let query = this.$route.query;\r\n        if (query.code) {\r\n            const toast = this['$createToast']({\r\n                time: 0,\r\n                txt: '数据获取中...'\r\n            });\r\n            toast.show();\r\n            this.$store.dispatch('getCodeInfo', { code: query.code }).then((response) => {\r\n                if (response.success) {\r\n                    if (response.data.openid) {\r\n                        this.openid = response.data.openid;\r\n                    }\r\n                    else if (response.data.sessionId) {\r\n                        this.$store.commit('SET_SESSION_ID', response.data.sessionId);\r\n                        this.$store.commit('SET_USER_INFO', response.data.userInfo);\r\n                        this.$router.replace({ path: '/appcenter' });\r\n                    }\r\n                }\r\n                toast.hide();\r\n            });\r\n        }\r\n        else {\r\n            console.log('不是微信登陆');\r\n        }\r\n    }\r\n    submitHandler(e) {\r\n        e.preventDefault();\r\n        if (!this.openid) {\r\n            const toast = this['$createToast']({\r\n                time: 1000,\r\n                txt: '稍后再试...'\r\n            });\r\n            toast.show();\r\n            return;\r\n        }\r\n        const toast = this['$createToast']({\r\n            time: 0,\r\n            txt: '绑定中...'\r\n        });\r\n        toast.show();\r\n        let reqData = Object.assign({}, this.model);\r\n        reqData.openid = this.openid;\r\n        this.$store.dispatch('bindingOpenid', reqData).then((response) => {\r\n            toast.hide();\r\n            if (response.success) {\r\n                let resData = response.data;\r\n                if (resData.sendSms) {\r\n                    this.isVerification = true;\r\n                }\r\n                else if (resData.isBind) {\r\n                    this.$store.commit('SET_USER_INFO', resData.userInfo);\r\n                    this.$store.commit('SET_SESSION_ID', this.openid);\r\n                    this.$router.replace({ path: '/appcenter' });\r\n                }\r\n                else {\r\n                    this['$createDialog']({\r\n                        type: 'alert',\r\n                        content: '您的手机号没有绑定，请联系商务开通！',\r\n                        icon: 'cubeic-wrong'\r\n                    }).show();\r\n                }\r\n            }\r\n            else {\r\n                if (response.type === 'verificationCode') {\r\n                    this['$createDialog']({\r\n                        type: 'alert',\r\n                        content: '验证码错误或者过期',\r\n                        icon: 'cubeic-wrong'\r\n                    }).show();\r\n                }\r\n                else {\r\n                    this['$createDialog']({\r\n                        type: 'alert',\r\n                        content: response.message,\r\n                        icon: 'cubeic-wrong'\r\n                    }).show();\r\n                }\r\n            }\r\n        });\r\n    }\r\n};\r\nLogin = __decorate([\r\n    Component({\r\n        components: {}\r\n    })\r\n], Login);\r\nexport default Login;\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2d573de6&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=2d573de6&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d573de6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\""],"sourceRoot":""}