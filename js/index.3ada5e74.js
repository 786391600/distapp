(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{"170f":function(e,t,i){"use strict";var a=i("1f3f"),o=i.n(a);o.a},"1f3f":function(e,t,i){},2855:function(e,t,i){},"9ed6":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[e._m(0),i("cube-form",{staticClass:"home-form",attrs:{model:e.model,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler}},[i("cube-form-group",[i("div",[i("cube-form-item",{attrs:{field:e.fields[0]}})],1),e.isVerification?i("div",{staticClass:"verificationCode"},[i("div",[i("cube-form-item",{attrs:{field:e.fields[1]}})],1),i("div",{staticClass:"verificationCode-button"},[i("cube-button",{attrs:{outline:!0,primary:!0,inline:!0},on:{click:e.getVerificationCode}},[e.sendMsgDisabled?i("span",[e._v(e._s(e.time+"秒后获取"))]):i("span",[e._v("获取验证码")])])],1)]):e._e()]),i("cube-form-group",[i("cube-button",{staticClass:"submit",attrs:{type:"submit"}},[e._v("立即绑定")])],1)],1)],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("span",{staticClass:"title"},[e._v("请输入手机号")]),i("span",{staticClass:"tip"},[e._v("请输入您在小区物业绑定的手机号")])])}],n=(i("a481"),i("d225")),s=i("b0b4"),r=i("308d"),l=i("6bb5"),c=i("4e2b"),u=i("9ab4"),d=i("60a3"),p=i("fdab"),v=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(r["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.model={phone:"",openid:""},e.fields=[{type:"input",modelKey:"phone",label:"手机号",props:{placeholder:"请输入号码"},rules:{required:!0,type:"tel"}},{type:"input",modelKey:"verificationCode",label:"验证码",props:{placeholder:"请输入",type:"text"},rules:{required:!0}}],e.valid=void 0,e.validity={},e.options={},e.time=60,e.sendMsgDisabled=!1,e.isVerification=!1,e.openid="",e.jump="",e}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){this.openid=this.$route.query.openid,this.jump=this.$route.query.jump}},{key:"onRouterChanged",value:function(){console.log("路由编号")}},{key:"validateHandler",value:function(e){this.validity=e.validity,this.valid=e.valid,console.log(e),console.log("validity",e.validity,e.valid,e.dirty,e.firstInvalidFieldIndex)}},{key:"submitHandler",value:function(e){var t=this;if(e.preventDefault(),this.openid){var i=this["$createToast"]({time:0,txt:"绑定中..."});i.show();var a=Object.assign({},this.model);a.openid=this.openid,this.$store.dispatch("bindingOpenid",a).then(function(e){if(i.hide(),e.success){var a=e.data;a.sendSms?(t.isVerification=!0,t.startCountdown()):a.isBind?(t.$store.commit("SET_USER_INFO",a.userInfo),t.$store.commit("SET_SESSION_ID",t.openid),t.$router.replace({path:t.jump})):t["$createDialog"]({type:"alert",content:"您的手机号没有绑定房屋，请联系您所在小区物业绑定手机！",icon:"cubeic-wrong"}).show()}else"verificationCode"===e.type&&t["$createDialog"]({type:"alert",content:"验证码错误或者过期",icon:"cubeic-wrong"}).show()})}else{var o=this["$createToast"]({time:1e3,txt:"稍后再试..."});o.show()}}},{key:"getVerificationCode",value:function(e){var t=this;if(e.preventDefault(),!this.sendMsgDisabled)if(this.openid){var i=this["$createToast"]({time:0,txt:"绑定中..."});i.show();var a={};a.openid=this.openid,a.phone=this.model.phone,this.$store.dispatch("bindingOpenid",a).then(function(e){if(i.hide(),e.success){var a=e.data;a.sendSms?(t.isVerification=!0,t.startCountdown()):a.isBind?(t.$store.commit("SET_USER_INFO",a.userInfo),t.$store.commit("SET_SESSION_ID",t.openid),t.$router.replace({path:t.jump})):t["$createDialog"]({type:"alert",content:"您的手机号没有绑定房屋，请联系您所在小区物业绑定手机！",icon:"cubeic-wrong"}).show()}else"verificationCode"===e.type&&t["$createDialog"]({type:"alert",content:"验证码错误或者过期",icon:"cubeic-wrong"}).show()})}else{var o=this["$createToast"]({time:1e3,txt:"稍后再试..."});o.show()}}},{key:"submitClick",value:function(){return!1}},{key:"startCountdown",value:function(){var e=this;if(e.sendMsgDisabled)return!1;e.sendMsgDisabled=!0;var t=window.setInterval(function(){(!e.isVerification||e.time--<=0)&&(e.time=60,e.sendMsgDisabled=!1,window.clearInterval(t))},1e3)}},{key:"getBindingInfo",value:function(){var e=this,t=this.$route.query;if(t.code){var i=this["$createToast"]({time:0,txt:"数据获取中..."});i.show(),this.$store.dispatch("getCodeInfo",{code:t.code}).then(function(t){t.success&&(t.data.openid?e.openid=t.data.openid:t.data.sessionId&&(e.$store.commit("SET_SESSION_ID",t.data.sessionId),e.$store.commit("SET_USER_INFO",t.data.userInfo),e.$router.replace({path:"/home"}))),i.hide()})}else console.log("不是微信登陆")}},{key:"phoneChange",value:function(){this.isVerification&&(this.isVerification=!1,this.time=60)}},{key:"computedMsg",get:function(){return"computed "+this.propB}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])({default:"default value"})],v.prototype,"propB",void 0),Object(u["a"])([Object(d["d"])("$route")],v.prototype,"onRouterChanged",null),Object(u["a"])([Object(d["d"])("model.phone")],v.prototype,"phoneChange",null),v=Object(u["a"])([Object(d["a"])({components:{HelloWorld:p["a"]}})],v);var h=v,f=h,b=(i("a1e9"),i("b9ac"),i("2877")),m=Object(b["a"])(f,a,o,!1,null,"490f8d07",null);t["default"]=m.exports},a1e9:function(e,t,i){"use strict";var a=i("2855"),o=i.n(a);o.a},b9ac:function(e,t,i){"use strict";var a=i("c8a6"),o=i.n(a);o.a},c8a6:function(e,t,i){},fdab:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello"},[i("h1",[e._v(e._s(e.msg))]),e._m(0),i("h3",[e._v("Installed CLI Plugins")]),e._m(1),i("h3",[e._v("Essential Links")]),e._m(2),i("h3",[e._v("Ecosystem")]),e._m(3)])},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),i("br"),e._v("\n    check out the\n    "),i("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript",target:"_blank",rel:"noopener"}},[e._v("typescript")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),i("li",[i("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),i("li",[i("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),i("li",[i("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),i("li",[i("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),i("li",[i("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],n=i("d225"),s=i("308d"),r=i("6bb5"),l=i("4e2b"),c=i("9ab4"),u=i("60a3"),d=function(e){function t(){return Object(n["a"])(this,t),Object(s["a"])(this,Object(r["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),t}(u["c"]);Object(c["a"])([Object(u["b"])()],d.prototype,"msg",void 0),d=Object(c["a"])([u["a"]],d);var p=d,v=p,h=(i("170f"),i("2877")),f=Object(h["a"])(v,a,o,!1,null,"13913fa2",null);t["a"]=f.exports}}]);
//# sourceMappingURL=index.3ada5e74.js.map