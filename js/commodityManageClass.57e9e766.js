(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commodityManageClass"],{"07e8":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cube-page",class:t.type},[s("header",{staticClass:"header"},[s("h1",[t._v(t._s(t.title))]),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:t.back}}),s("div",{staticClass:"header-edit"},[t._t("edit")],2)]),s("div",{class:{wrapper:!0,isWhite:"white"===t.type}},[s("section",{directives:[{name:"show",rawName:"v-show",value:t.desc,expression:"desc"}],staticClass:"desc"},[t._t("desc",[t._v(t._s(t.desc))])],2),s("main",{staticClass:"content"},[t._t("content",[t._v(t._s(t.content))])],2)])])},i=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),h=function(t){function e(){return Object(n["a"])(this,e),Object(o["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"back",value:function(){this.$router.back()}}]),e}(d["c"]);Object(l["a"])([Object(d["b"])()],h.prototype,"msg",void 0),Object(l["a"])([Object(d["b"])({default:"",required:!0})],h.prototype,"title",void 0),Object(l["a"])([Object(d["b"])({default:""})],h.prototype,"type",void 0),Object(l["a"])([Object(d["b"])({default:""})],h.prototype,"desc",void 0),Object(l["a"])([Object(d["b"])({default:""})],h.prototype,"content",void 0),Object(l["a"])([Object(d["b"])({default:!0})],h.prototype,"isBack",void 0),h=Object(l["a"])([d["a"]],h);var p=h,b=p,m=(s("ca73"),s("2877")),v=Object(m["a"])(b,a,i,!1,null,"0717ebb4",null);e["a"]=v.exports},"18a0":function(t,e,s){t.exports=s("574f")("./node_modules/weixin-js-sdk/index.js")},a3dc:function(t,e,s){"use strict";var a=s("ff1a"),i=s.n(a);i.a},b0b4:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var a=s("85f2"),i=s.n(a);function n(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),i()(t,a.key,a)}}function c(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}},b13e:function(t,e,s){},c5b0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("page",{attrs:{title:"商品分类"}},[s("div",{attrs:{slot:"edit"},slot:"edit"},[s("span",{staticClass:"add-btn",on:{click:t.previewCommodity}},[t._v("预览商店")])]),s("div",{attrs:{slot:"content"},slot:"content"},[s("ul",{staticClass:"commodity-list"},[t._l(t.classList,function(e,a){return s("li",{key:a,staticClass:"commodity-card"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"item.name"}],staticClass:"title",attrs:{contenteditable:!0,placeholder:"请输入分类"},domProps:{value:e.name},on:{input:[function(s){s.target.composing||t.$set(e,"name",s.target.value)},function(s){return t.inputChange(a,e)}]}}),s("div",{staticClass:"edit-btn"},[s("cube-button",{directives:[{name:"show",rawName:"v-show",value:e.change,expression:"item.change"}],staticClass:"btn",attrs:{inline:!0},on:{click:function(s){return t.saveClick(a,e)}}},[t._v("保存")]),s("cube-button",{directives:[{name:"show",rawName:"v-show",value:!e.change,expression:"!item.change"}],staticClass:"btn",attrs:{inline:!0,primary:!0},on:{click:function(s){return t.showCommodity(e)}}},[t._v("查看商品")]),s("cube-button",{directives:[{name:"show",rawName:"v-show",value:!e.id,expression:"!item.id"}],staticClass:"btn delete",attrs:{inline:!0,primary:!0},on:{click:function(e){return t.deleteClass(a)}}},[t._v("删除")])],1)])}),s("li",{staticClass:"commodity-card class-add",on:{click:t.classAdd}},[t._v("添加分类+")])],2),s("pageView"),s("wx-open-launch-weapp",{ref:"launchBtn",attrs:{id:"launch-btn",username:"gh_94c362cb2a30",path:"pages/index/index.html"}},[s("script",{attrs:{type:"text/wxtag-template"}},[t._v('\n        <button class="wx-btn">跳转小程序</button>\n      ')])])],1)])},i=[],n=s("d225"),c=s("b0b4"),o=s("308d"),r=s("6bb5"),u=s("4e2b"),l=s("9ab4"),d=s("60a3"),h=s("07e8"),p=s("18a0"),b=s.n(p),m=s("3a45"),v=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(o["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.classList=[],t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.businessId=this.$store.state.userInfo.business,this.getWeiXinConfig(),this.$store.commit("SET_SESSION_ID","noSession"),this.getData()}},{key:"getCommodityClassList",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getCommodityClassList",{business:this.businessId,shopId:this.shopId}).then(function(s){if(s.success){var a=s.data.list;t.$set(t,"classList",a)}e.hide()})}},{key:"inputChange",value:function(t,e){e.change=!0,this.$set(this.classList,t,e)}},{key:"classAdd",value:function(){var t={businessId:this.businessId,id:"",level:1,name:"",change:!0,shopId:this.shopId};this.classList.push(t)}},{key:"saveClick",value:function(t,e){var s=this;if(e.name){var a={businessId:e.businessId,id:e.id,level:e.level,name:e.name,shopId:this.shopId};this.$store.dispatch("addOrUpdateCommodityClass",a).then(function(a){if(a.success){e.change=!1,e.id?s.$set(s.classList,t,e):s.$set(s.classList,t,a.data);var i=s.$createToast({txt:"保存成功",time:2e3,type:"warn"});i.show()}})}else{var i=this.$createToast({txt:"分类名称必填",time:2e3,type:"warn"});i.show()}}},{key:"showCommodity",value:function(t){var e={id:t.id,name:t.name,shopId:t.shopId};this.$router.push({path:"/shopList/commodityManageClass/commodityManage",query:e})}},{key:"deleteClass",value:function(t){this.classList.splice(t,1)}},{key:"previewCommodity",value:function(){this.$router.push({path:"/commodityClass",query:{state:"business@"+this.businessId+"$shop@"+this.shopId}})}},{key:"getWeiXinConfig",value:function(){var t=window.location.href;this.$store.dispatch("getWeixinConfig",{url:t}).then(function(t){if(console.log("获取微信配置成功",t),t.success){var e=t.data;b.a.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["wx-open-launch-weapp"],openTagList:["wx-open-launch-weapp"]})}})}},{key:"getData",value:function(){this.shopId!==this.$route.query.shopId&&(this.shopId=this.$route.query.shopId,this.getCommodityClassList())}}]),e}(d["c"]);v=Object(l["a"])([Object(d["a"])({components:{page:h["a"],pageView:m["a"]}})],v);var f=v,y=f,w=(s("a3dc"),s("2877")),g=Object(w["a"])(y,a,i,!1,null,"87af741a",null);e["default"]=g.exports},ca73:function(t,e,s){"use strict";var a=s("b13e"),i=s.n(a);i.a},ff1a:function(t,e,s){}}]);
//# sourceMappingURL=commodityManageClass.57e9e766.js.map