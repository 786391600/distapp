(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["noticeAdmin"],{"0a13":function(t,e,a){},"170f":function(t,e,a){"use strict";var i=a("1f3f"),s=a.n(i);s.a},"1f3f":function(t,e,a){},"9ab1":function(t,e,a){"use strict";var i=a("0a13"),s=a.n(i);s.a},a4bb:function(t,e,a){},e227:function(t,e,a){"use strict";var i=a("a4bb"),s=a.n(i);s.a},e3fa:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"repair"},[a("div",{staticClass:"swipe-wrapper"},[a("cube-tab-bar",{attrs:{data:t.tabBarList},on:{change:t.tabBarChange},model:{value:t.selectedLabelDefault,callback:function(e){t.selectedLabelDefault=e},expression:"selectedLabelDefault"}}),"notice"===this.selectedLabelDefault?a("div",{staticClass:"repair"},[a("div",{staticClass:"address"},[a("div",{staticClass:"info"},[a("i",{staticClass:"iconfont iconxiaoqu1"}),a("cube-select",{attrs:{title:t.title,options:t.accountOptions,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.accountChange},model:{value:t.accountId,callback:function(e){t.accountId=e},expression:"accountId"}})],1)]),a("div",[a("cube-form",{staticClass:"home-form",attrs:{model:t.model,options:t.options},on:{validate:t.validateHandler,submit:t.submitHandler}},[a("cube-form-group",[a("div",[a("cube-form-item",{attrs:{field:t.fields[0]}})],1),a("div",[a("cube-form-item",{attrs:{field:t.fields[1]}})],1)]),a("cube-form-group",[a("cube-button",{staticClass:"submit",attrs:{type:"submit"}},[t._v("点击发布")])],1)],1)],1)]):t._e(),"noticeList"===this.selectedLabelDefault?a("div",{staticClass:"repairList"},[t._l(t.noticeList,function(e){return a("div",{staticClass:"repairList-box"},[a("div",{staticClass:"repairList-box-head"},[t._v(t._s(t._f("getFormatDate")(e.time)))]),a("div",{staticClass:"repairList-box-box"},[a("div",[a("span",{staticClass:"title"},[t._v("公告标题")]),a("span",[t._v(t._s(e.title))])]),a("div",[a("span",{staticClass:"title"},[t._v("公告时间")]),a("span",[t._v(t._s(t._f("getFormatDate")(e.time)))])]),a("div",[a("span",{staticClass:"title"},[t._v("公告内容")]),a("span",[t._v(t._s(e.details))])])])])}),"noticeList"===t.selectedLabelDefault&&t.isShowMore?a("div",{staticClass:"more",on:{click:t.showMoreClick}},[t._v("加载更多")]):t._e(),"noticeList"!==t.selectedLabelDefault||t.isShowMore?t._e():a("div",{staticClass:"more"},[t._v("没有数据了")])],2):t._e()],1)])},s=[],o=(a("ac6a"),a("a481"),a("d225")),n=a("b0b4"),r=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),v=a("fdab"),h=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.model={details:"",title:""},t.fields=[{type:"input",modelKey:"title",props:{placeholder:"请输入公告标题"},label:"公告标题",rules:{required:!0},messages:{required:"请输入公告内容"}},{type:"textarea",modelKey:"details",props:{placeholder:"请输入公告详情...",maxlength:"500",autoExpand:!0,autofocus:!0},rules:{required:!0},messages:{required:"请输入公告内容"}}],t.accountId="",t.selectedLabelDefault="notice",t.tabBarList=[{label:"公告发布",value:"notice"},{label:"发布记录",value:"noticeList"}],t.page=1,t.isShowMore=!0,t.accountList=[],t.noticeList=[],t}return Object(l["a"])(e,t),Object(n["a"])(e,[{key:"activated",value:function(){this.pageInit()}},{key:"validateHandler",value:function(t){this.validity=t.validity,this.valid=t.valid,console.log(t),console.log("validity",t.validity,t.valid,t.dirty,t.firstInvalidFieldIndex)}},{key:"getBindingInfo",value:function(){var t=this,e=this.$route.query;if(e.code){var a=this["$createToast"]({time:0,txt:"数据获取中..."});a.show(),this.$store.dispatch("getCodeInfo",{code:e.code}).then(function(e){e.success&&(e.data.openid?(t.openid=e.data.openid,t.$router.replace({path:"/login",query:{openid:e.data.openid,jump:"/home"}})):e.data.sessionId&&(t.$store.commit("SET_SESSION_ID",e.data.sessionId),t.$store.commit("SET_USER_INFO",e.data.userInfo),t.getAdminAccountList())),a.hide()})}else console.log("不是微信登陆")}},{key:"pageInit",value:function(){var t=this.$route.query;this.$store.state.sessionId&&!this.accountId?this.getAdminAccountList():t.code&&!this.$store.state.sessionId&&this.getBindingInfo()}},{key:"getAdminAccountList",value:function(){var t=this,e=this;this.$store.dispatch("getAdminAccountList",{}).then(function(a){a.data.list&&(a.data.list.forEach(function(t,a){e.$set(e.accountList,a,t)}),t.accountId||(t.accountId=t.accountList[0].id))})}},{key:"tabBarChange",value:function(t){"noticeList"===t&&(this.page=1,this.noticeList=[],this.getNoticeList())}},{key:"submitHandler",value:function(t){var e=this;t.preventDefault();var a={};a.accountId=this.accountId,a.details=this.model.details,a.title=this.model.title,this.$store.dispatch("addNotice",a).then(function(t){t.success&&(e.model={details:"",title:""},e.selectedLabelDefault="noticeList",e.tabBarChange("noticeList"),e["$createDialog"]({type:"alert",content:"公告发布成功！",icon:"cubeic-ok"}).show())})}},{key:"getHouseInfo",value:function(){var t=this,e={};return this.$store.state.houseList.forEach(function(a){a.id===t.houseId&&(e=a)}),e}},{key:"getNoticeList",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getNoticeList",{page:this.page,accountId:this.accountId}).then(function(a){a.success&&(a.data.list.length>0?t.noticeList=t.noticeList.concat(a.data.list):t.isShowMore=!1),e.hide()})}},{key:"showMoreClick",value:function(){this.page++,this.getNoticeList()}},{key:"accountOptions",get:function(){return this.accountList.forEach(function(t){t.value=t.id,t.text=t.name}),this.accountList}},{key:"userInfo",get:function(){return this.$store.state.userInfo}}]),e}(d["c"]);Object(u["a"])([Object(d["b"])({default:"default value"})],h.prototype,"propB",void 0),h=Object(u["a"])([Object(d["a"])({components:{HelloWorld:v["a"]},filters:{getFormatDate:function(t){return new Date(t).getFullYear()+"年"+(new Date(t).getMonth()+1)+"月"+new Date(t).getDate()+"号"},getRepairType:function(t){return"type1"===t?"开锁服务":"type2"===t?"公共报修":"type3"===t?"个人报修":"其他报修"}}})],h);var p=h,f=p,b=(a("9ab1"),a("e227"),a("2877")),g=Object(b["a"])(f,i,s,!1,null,"026343ea",null);e["default"]=g.exports},fdab:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._m(0),a("h3",[t._v("Installed CLI Plugins")]),t._m(1),a("h3",[t._v("Essential Links")]),t._m(2),a("h3",[t._v("Ecosystem")]),t._m(3)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("\n    For a guide and recipes on how to configure / customize this project,"),a("br"),t._v("\n    check out the\n    "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript",target:"_blank",rel:"noopener"}},[t._v("typescript")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],o=a("d225"),n=a("308d"),r=a("6bb5"),c=a("4e2b"),l=a("9ab4"),u=a("60a3"),d=function(t){function e(){return Object(o["a"])(this,e),Object(n["a"])(this,Object(r["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),e}(u["c"]);Object(l["a"])([Object(u["b"])()],d.prototype,"msg",void 0),d=Object(l["a"])([u["a"]],d);var v=d,h=v,p=(a("170f"),a("2877")),f=Object(p["a"])(h,i,s,!1,null,"13913fa2",null);e["a"]=f.exports}}]);
//# sourceMappingURL=noticeAdmin.25de60da.js.map