(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["noticeConfig"],{"07e8":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-page",class:t.type},[i("header",{staticClass:"header"},[i("h1",[t._v(t._s(t.title))]),i("i",{directives:[{name:"show",rawName:"v-show",value:t.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:t.back}}),i("div",{staticClass:"header-edit"},[t._t("edit")],2)]),i("div",{class:{wrapper:!0,isWhite:"white"===t.type}},[i("section",{directives:[{name:"show",rawName:"v-show",value:t.desc,expression:"desc"}],staticClass:"desc"},[t._t("desc",[t._v(t._s(t.desc))])],2),i("main",{staticClass:"content"},[t._t("content",[t._v(t._s(t.content))])],2)])])},s=[],c=i("d225"),o=i("b0b4"),n=i("308d"),l=i("6bb5"),r=i("4e2b"),u=i("9ab4"),b=i("60a3"),d=function(t){function e(){return Object(c["a"])(this,e),Object(n["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"back",value:function(){this.$router.back()}}]),e}(b["c"]);Object(u["a"])([Object(b["b"])()],d.prototype,"msg",void 0),Object(u["a"])([Object(b["b"])({default:"",required:!0})],d.prototype,"title",void 0),Object(u["a"])([Object(b["b"])({default:""})],d.prototype,"type",void 0),Object(u["a"])([Object(b["b"])({default:""})],d.prototype,"desc",void 0),Object(u["a"])([Object(b["b"])({default:""})],d.prototype,"content",void 0),Object(u["a"])([Object(b["b"])({default:!0})],d.prototype,"isBack",void 0),d=Object(u["a"])([b["a"]],d);var f=d,p=f,v=(i("724a"),i("2877")),h=Object(v["a"])(p,a,s,!1,null,"758695be",null);e["a"]=h.exports},"2f6b":function(t,e,i){},"51f3":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"right-box"},t._l(t.list,function(e,a){return i("div",{key:a,staticClass:"box",on:{click:function(i){return t.boxClick(e.action)}}},[e.icon?i("i",{class:["iconfont",e.icon]}):i("span",[t._v(t._s(e.text))])])}),0)},s=[],c=i("d225"),o=i("b0b4"),n=i("308d"),l=i("6bb5"),r=i("4e2b"),u=i("9ab4"),b=i("60a3"),d=function(t){function e(){return Object(c["a"])(this,e),Object(n["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"boxClick",value:function(t){this.$emit("click",t)}}]),e}(b["c"]);Object(u["a"])([Object(b["b"])()],d.prototype,"list",void 0),d=Object(u["a"])([b["a"]],d);var f=d,p=f,v=(i("b493"),i("2877")),h=Object(v["a"])(p,a,s,!1,null,"1bd23a4e",null);e["a"]=h.exports},"57bd":function(t,e,i){},"724a":function(t,e,i){"use strict";var a=i("2f6b"),s=i.n(a);s.a},a387:function(t,e,i){},b493:function(t,e,i){"use strict";var a=i("a387"),s=i.n(a);s.a},c88e:function(t,e,i){"use strict";i.d(e,"a",function(){return s});var a=i("7618");i("3b2b"),i("a481");var s=function t(e){var i;if("object"===Object(a["a"])(e))if(null===e)i=null;else if(e instanceof Date)i=e;else if(e instanceof Array){i=[];for(var s=0,c=e.length;s<c;s++)i.push(t(e[s]))}else for(var o in i={},e)i[o]=t(e[o]);else i=e;return i}},ebb7:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{attrs:{title:t.className}},[i("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[t._l(t.noticeList,function(e,a){return i("div",{staticClass:"notice-box"},[i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"oprate"},[i("div",{staticClass:"oprate-btn btn-delete",on:{click:function(e){return t.deleteNotice(a)}}},[t._v("删除")])])])}),t.showBtn?i("cube-button",{on:{click:t.saveSchoolInfo}},[t._v("保存")]):t._e(),i("cube-popup",{ref:"myPopup",attrs:{type:"my-popup",maskClosable:!0,center:!1,position:"top"},on:{"mask-click":t.maskClick}},[i("addNotice",{ref:"addNotice",on:{submit:t.submit}})],1),i("rightBox",{attrs:{list:t.oprateConfig},on:{click:t.boxClick}})],2)])},s=[],c=i("d225"),o=i("b0b4"),n=i("308d"),l=i("6bb5"),r=i("4e2b"),u=i("9ab4"),b=i("60a3"),d=i("07e8"),f=i("3a45"),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("cube-form",{ref:"addForm",attrs:{model:t.model,schema:t.schema,"immediate-validate":!1,options:t.options},on:{validate:t.validateHandler,submit:t.submitHandler,reset:t.resetHandler}})},v=[],h=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(n["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.validity={},t.valid=void 0,t.model={title:""},t.schema={groups:[{legend:"新增公告",fields:[{type:"textarea",modelKey:"title",label:"公告内容",props:{placeholder:"请输入"},rules:{required:!0},debounce:100}]},{fields:[{type:"submit",label:"保存"}]}]},t.options={scrollToInvalidField:!0,layout:"classic"},t}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"submitHandler",value:function(t){t.preventDefault(),this.$emit("submit",this.model)}},{key:"validateHandler",value:function(t){this.validity=t.validity,this.valid=t.valid,console.log("validity",t.validity,t.valid,t.dirty,t.firstInvalidFieldIndex)}},{key:"reset",value:function(t){this.$refs.addForm.reset()}}]),e}(b["c"]);h=Object(u["a"])([b["a"]],h);var y=h,O=y,m=i("2877"),j=Object(m["a"])(O,p,v,!1,null,"fe0e5680",null),k=j.exports,C=i("c88e"),_=i("51f3"),w=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(n["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.className="公告配置",t.showBtn=!1,t.oprateConfig=[{text:"添加",action:"add"}],t.noticeList=Object(C["a"])(t.noticeConfig),t}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"showPopup",value:function(t){this.maskClick();var e=this.$refs[t];e.show()}},{key:"hidePopup",value:function(t){var e=this.$refs[t];e.hide()}},{key:"maskClick",value:function(){this.$refs.addNotice.reset()}},{key:"submit",value:function(t){this.noticeList.push({title:t.title,url:""}),this.showBtn=!0,this.hidePopup("myPopup")}},{key:"deleteNotice",value:function(t){this.noticeList.splice(t,1),this.showBtn=!0}},{key:"saveSchoolInfo",value:function(){var t=this;this.$store.dispatch("updateSchoolInfo",{schoolId:this.schoolInfo.id,type:"noticeConfig",value:this.noticeList}).then(function(e){e.success&&(t.showBtn=!1,t.showToastType()),t.$store.commit("SET_SCHOOL_INFO_BY_TYPE",{type:"noticeConfig",value:t.noticeList})})}},{key:"showToastType",value:function(){var t=this.$createToast({txt:"保存成功",type:"correct"});t.show()}},{key:"boxClick",value:function(t){"add"===t&&this.showPopup("myPopup")}},{key:"noticeConfig",get:function(){return this.$store.state.schoolInfo.noticeConfig||[]}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),e}(b["c"]);w=Object(u["a"])([Object(b["a"])({components:{page:d["a"],pageView:f["a"],addNotice:k,rightBox:_["a"]}})],w);var g=w,x=g,$=(i("eefc"),Object(m["a"])(x,a,s,!1,null,"41a0ef04",null));e["default"]=$.exports},eefc:function(t,e,i){"use strict";var a=i("57bd"),s=i.n(a);s.a}}]);
//# sourceMappingURL=noticeConfig.cf3c2dc7.js.map