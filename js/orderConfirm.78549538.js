(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderConfirm"],{"0355":function(t,e,n){},"15b6":function(t,e,n){},"7d76":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"raceList"},[n("cube-form",{attrs:{model:t.model},on:{submit:t.submitHandler}},[n("cube-form-group",[n("cube-form-item",{attrs:{field:t.fields[0]}}),n("cube-form-item",{attrs:{field:t.fields[1]}})],1),n("cube-form-group",[n("cube-button",{attrs:{type:"submit"}},[t._v("保存并使用")])],1)],1)],1)},s=[],i=(n("3b2b"),n("a481"),n("d225")),o=n("b0b4"),c=n("308d"),u=n("6bb5"),r=n("4e2b"),d=n("9ab4"),h=n("60a3"),l=n("b312"),f=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.model={phone:"",address:"",openid:""},t.fields=[{type:"input",modelKey:"phone",label:"手机号",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur"},{type:"textarea",modelKey:"address",label:"收货地址",props:{placeholder:"示例：乡宁县 新城区 丛林小区331"},rules:{required:!0,message:"请填写正确的收货地址"},trigger:"blur"}],t.selectDate=new Date,t.raceList=[],t.accountId="",t.isShowMore=!0,t}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"activated",value:function(){var t=this.$route.query.userInfo;t.address&&(this.model.address=t.address),t.phone&&(this.model.phone=t.phone),this.model.openid=this.$route.query.openid}},{key:"pageInit",value:function(){var t=this.$route.query;this.accountId=t.accountId,this.monthChange(new Date)}},{key:"submitHandler",value:function(t){var e=this;t.preventDefault(),this.$store.dispatch("saveUserInfo",this.model).then(function(t){t.success&&(e.$store.commit("COMMODITY_USER_INFO",e.model),e.$router.go(-1))})}},{key:"getRaceListByAccountId",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getRaceListByAccountId",{accountId:this.accountId,start:this.start,end:this.end,page:this.page}).then(function(n){if(n.success){var a=n.data;n.data.list.length>0?t.raceList=t.raceList.concat(a.list):t.isShowMore=!1}e.hide()})}},{key:"monthSelect",value:function(){var t=this;this.updatePropsPicker=this.$createDatePicker({title:"月份选择",max:new Date,value:t.selectDate,format:{year:"YYYY年",month:"MM月"},columnCount:2,onSelect:t.monthChange}),this.updatePropsPicker.show()}},{key:"monthChange",value:function(t){this.selectDate=t;var e=t.getMonth(),n=++e,a=new Date(t.getFullYear(),n,1,"23","59","59"),s=864e5,i=this.format(new Date(a-s),"yyyyMMddHHmmss"),o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),"00","00","00");o.setDate(1);var c=this.format(o,"yyyyMMddHHmmss");this.start=c,this.end=i,this.page=1,this.isShowMore=!0,this.raceList=[],this.getRaceListByAccountId()}},{key:"showMoreClick",value:function(){this.page++,this.getRaceListByAccountId()}},{key:"format",value:function(t,e){e||(e="yyyy-MM-dd hh:mm:ss");var n={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}},{key:"formatMonth",get:function(){return this.format(this.selectDate,"yyyy-MM")}}]),e}(h["c"]);f=Object(d["a"])([Object(h["a"])({components:{accountSelect:l["a"]},filters:{billType:function(t){return"property"===t?"物业费用":"parking"===t?"停车费用":"water"===t?"水费":"其他费用"},address:function(t){return t.account_info[0].name+t.build_info[0].name+t.house_info[0].unitNum+"单元"+t.house_info[0].floorNum+"层"+t.house_info[0].roomNum+"室"},filterEndTime:function(t){var e=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/;return t.replace(e,"$1-$2-$3 $4:$5:$6")},fenToYuan:function(t){return"number"!==typeof t||isNaN(t)?null:"¥"+(t/100).toFixed(2)}}})],f);var p=f,m=p,g=(n("93a0"),n("2877")),b=Object(g["a"])(m,a,s,!1,null,"7e6ca5c0",null);e["default"]=b.exports},"93a0":function(t,e,n){"use strict";var a=n("de4b"),s=n.n(a);s.a},b312:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"accountSelect"},[n("div",{staticClass:"address"},[n("div",{staticClass:"info"},[n("i",{staticClass:"iconfont iconxiaoqu1"}),n("cube-select",{attrs:{options:t.accountOptions},on:{change:t.accountChange},model:{value:t.accountId,callback:function(e){t.accountId=e},expression:"accountId"}})],1)])])},s=[],i=(n("ac6a"),n("a481"),n("d225")),o=n("b0b4"),c=n("308d"),u=n("6bb5"),r=n("4e2b"),d=n("9ab4"),h=n("60a3"),l=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.accountList=[],t.accountId="",t}return Object(r["a"])(e,t),Object(o["a"])(e,[{key:"activated",value:function(){this.accountId?this.$emit("change",this.accountId):this.pageInit()}},{key:"getBindingInfo",value:function(){var t=this,e=this.$route.query;if(e.code){var n=this["$createToast"]({time:0,txt:"数据获取中..."});n.show(),this.$store.dispatch("getCodeInfo",{code:e.code}).then(function(e){e.success&&(e.data.openid?(t.openid=e.data.openid,t.$router.replace({path:"/login",query:{openid:e.data.openid,jump:"/home"}})):e.data.sessionId&&(t.$store.commit("SET_SESSION_ID",e.data.sessionId),t.$store.commit("SET_USER_INFO",e.data.userInfo),t.getAdminAccountList())),n.hide()})}else console.log("不是微信登陆")}},{key:"pageInit",value:function(){var t=this.$route.query;this.$store.state.sessionId&&!this.accountId?this.getAdminAccountList():t.code&&!this.$store.state.sessionId&&this.getBindingInfo()}},{key:"getAdminAccountList",value:function(){var t=this,e=this;this.$store.dispatch("getAdminAccountList",{}).then(function(n){n.data.list&&(n.data.list.forEach(function(t,n){e.$set(e.accountList,n,t)}),t.accountId||(t.accountId=t.accountList[0].id))})}},{key:"getFloorByAccountId",value:function(){var t=this,e=this["$createToast"]({time:0,txt:"数据获取中..."});e.show(),this.$store.dispatch("getFloorByAccountId",{accountId:this.accountId}).then(function(n){n.success&&("incomplete"===t.selectedLabelDefault?(t.billList=n.data.list,t.initCheckbox()):n.data.list.length>0?t.billList=t.billList.concat(n.data.list):t.isShowMore=!1),e.hide()})}},{key:"accountChange",value:function(t){var e={};this.accountOptions.forEach(function(n){n.id===t&&(e=n)}),this.$emit("change",t,e)}},{key:"computedMsg",get:function(){return"computed "+this.propB}},{key:"accountOptions",get:function(){return this.accountList.forEach(function(t){t.value=t.id,t.text=t.name}),this.accountList}}]),e}(h["c"]);Object(d["a"])([Object(h["d"])("accountId")],l.prototype,"accountChange",null),l=Object(d["a"])([Object(h["a"])({components:{},filters:{}})],l);var f=l,p=f,m=(n("c530"),n("b77c"),n("2877")),g=Object(m["a"])(p,a,s,!1,null,"220f41c5",null);e["a"]=g.exports},b77c:function(t,e,n){"use strict";var a=n("0355"),s=n.n(a);s.a},c530:function(t,e,n){"use strict";var a=n("15b6"),s=n.n(a);s.a},de4b:function(t,e,n){}}]);
//# sourceMappingURL=orderConfirm.78549538.js.map