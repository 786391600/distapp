(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{"8ffe":function(e,t,i){"use strict";var o=i("a3d0"),n=i.n(o);n.a},"9ed6":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("div",{staticClass:"header"},[e._v("业主绑定")]),i("cube-form",{attrs:{model:e.model,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler}},[i("cube-form-group",[i("div",[i("cube-form-item",{attrs:{field:e.fields[0]}})],1),e.isVerification?i("div",{staticClass:"verificationCode"},[i("div",[i("cube-form-item",{attrs:{field:e.fields[1]}})],1),i("div",{staticClass:"verificationCode-button"},[i("cube-button",{attrs:{outline:!0,primary:!0,inline:!0},on:{click:e.startCountdown}},[e.sendMsgDisabled?i("span",[e._v(e._s(e.time+"秒后获取"))]):i("span",[e._v("获取验证码")])])],1)]):e._e()]),i("cube-form-group",[i("cube-button",{staticClass:"submit",attrs:{type:"submit"}},[e._v("绑定")])],1)],1)],1)},n=[],a=(i("a481"),i("d225")),s=i("b0b4"),d=i("308d"),r=i("6bb5"),l=i("4e2b"),c=i("9ab4"),u=i("60a3"),p=i("fdab"),v=function(e){function t(){var e;return Object(a["a"])(this,t),e=Object(d["a"])(this,Object(r["a"])(t).apply(this,arguments)),e.model={phone:"",openid:""},e.fields=[{type:"input",modelKey:"phone",label:"手机号",props:{placeholder:"请输入"},rules:{required:!0,type:"tel"}},{type:"input",modelKey:"verificationCode",label:"验证码",props:{placeholder:"请输入",type:"text"},rules:{required:!0}}],e.valid=void 0,e.validity={},e.options={},e.time=60,e.sendMsgDisabled=!1,e.isVerification=!1,e.openid="",e}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"mounted",value:function(){this.getBindingInfo()}},{key:"onRouterChanged",value:function(){console.log("路由编号")}},{key:"validateHandler",value:function(e){this.validity=e.validity,this.valid=e.valid,console.log(e),console.log("validity",e.validity,e.valid,e.dirty,e.firstInvalidFieldIndex)}},{key:"submitHandler",value:function(e){var t=this;if(e.preventDefault(),this.openid){var i=this["$createToast"]({time:0,txt:"绑定中..."});i.show();var o=Object.assign({},this.model);o.openid=this.openid,this.$store.dispatch("bindingOpenid",o).then(function(e){i.hide(),e.success?(t.isVerification=!0,t.startCountdown()):"verificationCode"===e.type&&t["$createDialog"]({type:"alert",content:"验证码错误或者过期",icon:"cubeic-wrong"}).show()})}else{var n=this["$createToast"]({time:1e3,txt:"稍后再试..."});n.show()}}},{key:"submitClick",value:function(){return!1}},{key:"startCountdown",value:function(){var e=this;if(e.sendMsgDisabled)return!1;e.sendMsgDisabled=!0;var t=window.setInterval(function(){e.time--<=0&&(e.time=10,e.sendMsgDisabled=!1,window.clearInterval(t))},1e3)}},{key:"getBindingInfo",value:function(){var e=this,t=this.$route.query;if(t.code){var i=this["$createToast"]({time:0,txt:"数据获取中..."});i.show(),this.$store.dispatch("getCodeInfo",{code:t.code}).then(function(t){t.success&&(t.data.openid?e.openid=t.data.openid:t.data.sessionId&&(e.$store.commit("SET_SESSION_ID",t.data.sessionId),e.$store.commit("SET_USER_INFO",t.data.userInfo),console.log(e.$store,"ooo"),e.$router.replace({path:"/home"}))),i.hide()})}else console.log("不是微信登陆")}},{key:"computedMsg",get:function(){return"computed "+this.propB}}]),t}(u["c"]);Object(c["a"])([Object(u["b"])({default:"default value"})],v.prototype,"propB",void 0),Object(c["a"])([Object(u["d"])("$route")],v.prototype,"onRouterChanged",null),v=Object(c["a"])([Object(u["a"])({components:{HelloWorld:p["a"]}})],v);var f=v,b=f,h=(i("8ffe"),i("2877")),m=Object(h["a"])(b,o,n,!1,null,"37e9b676",null);t["default"]=m.exports},a3d0:function(e,t,i){}}]);
//# sourceMappingURL=index.cb2488b0.js.map