(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["notice"],{"3f1d":function(t,e,s){"use strict";var i=s("df6b"),a=s.n(i);a.a},"4b58":function(t,e,s){"use strict";var i=s("665d"),a=s.n(i);a.a},"665d":function(t,e,s){},ab43:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"repair"},[s("div",{staticClass:"swipe-wrapper"},[s("div",{staticClass:"address"},[s("div",{staticClass:"info"},[s("i",{staticClass:"iconfont iconxiaoqu1"}),s("cube-select",{attrs:{title:t.title,options:t.houseOptions,placeholder:t.placeholder,"auto-pop":t.autoPop,disabled:t.disabled},on:{change:t.houseChange},model:{value:t.houseId,callback:function(e){t.houseId=e},expression:"houseId"}})],1)]),s("div",{staticClass:"repairList"},[t._l(t.noticeList,function(e){return s("div",{staticClass:"repairList-box"},[s("div",{staticClass:"repairList-box-head"},[t._v(t._s(t._f("getFormatDate")(e.time)))]),s("div",{staticClass:"repairList-box-box"},[s("div",[s("span",{staticClass:"title"},[t._v("公告标题")]),s("span",[t._v(t._s(e.title))])]),s("div",[s("span",{staticClass:"title"},[t._v("公告时间")]),s("span",[t._v(t._s(t._f("getFormatDate")(e.time)))])]),s("div",[s("span",{staticClass:"title"},[t._v("公告内容")]),s("span",[t._v(t._s(e.details))])])])])}),t.isShowMore?s("div",{staticClass:"more",on:{click:t.showMoreClick}},[t._v("加载更多")]):t._e(),t.isShowMore?t._e():s("div",{staticClass:"more"},[t._v("没有数据了")])],2)])])},a=[],o=(s("ac6a"),s("a481"),s("d225")),n=s("b0b4"),c=s("308d"),r=s("6bb5"),u=s("4e2b"),d=s("9ab4"),l=s("60a3"),h=s("fdab"),v=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(c["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.houseId="",t.page=1,t.isShowMore=!0,t.noticeList=[],t.listData=[],t}return Object(u["a"])(e,t),Object(n["a"])(e,[{key:"activated",value:function(){this.pageInit()}},{key:"validateHandler",value:function(t){this.validity=t.validity,this.valid=t.valid,console.log(t),console.log("validity",t.validity,t.valid,t.dirty,t.firstInvalidFieldIndex)}},{key:"getBindingInfo",value:function(){var t=this,e=this.$route.query;if(e.code){var s=this["$createToast"]({time:0,txt:"数据获取中..."});s.show(),this.$store.dispatch("getCodeInfo",{code:e.code}).then(function(e){e.success&&(e.data.openid?(t.openid=e.data.openid,t.$router.replace({path:"/login",query:{openid:e.data.openid,jump:"/home"}})):e.data.sessionId&&(t.$store.commit("SET_SESSION_ID",e.data.sessionId),t.$store.commit("SET_USER_INFO",e.data.userInfo),t.getHouseList())),s.hide()})}else console.log("不是微信登陆")}},{key:"pageInit",value:function(){var t=this.$route.query;this.$store.state.sessionId&&!this.houseId?this.getHouseList():t.code&&!this.$store.state.sessionId&&this.getBindingInfo()}},{key:"getHouseList",value:function(){var t=this;this.$store.dispatch("getHouseList",{}).then(function(e){e.data.list&&(t.listData=e.data.list,t.houseId||(t.houseId=t.listData[0].id),t.$store.commit("SET_HOUSE_LIST",t.listData),t.noticeList=[],t.page=1,t.getNoticeList())})}},{key:"getHouseInfo",value:function(){var t=this,e={};return this.$store.state.houseList.forEach(function(s){s.id===t.houseId&&(e=s)}),e}},{key:"getNoticeList",value:function(){var t=this,e=this.getHouseInfo();console.log(e,"houseInfo");var s=this["$createToast"]({time:0,txt:"数据获取中..."});s.show(),this.$store.dispatch("getNoticeList",{page:this.page,accountId:e.accountId}).then(function(e){e.success&&(e.data.list.length>0?t.noticeList=t.noticeList.concat(e.data.list):t.isShowMore=!1),s.hide()})}},{key:"showMoreClick",value:function(){this.page++,this.getNoticeList()}},{key:"houseOptions",get:function(){return this.$store.state.houseList.forEach(function(t){t.value=t.id,t.text=t.account_info[0].name+" "+t.build_info[0].name+" "+t.unitNum+"单元"+t.floorNum+"层"+t.roomNum+"室"}),this.$store.state.houseList}},{key:"userInfo",get:function(){return this.$store.state.userInfo}}]),e}(l["c"]);Object(d["a"])([Object(l["b"])({default:"default value"})],v.prototype,"propB",void 0),v=Object(d["a"])([Object(l["a"])({components:{HelloWorld:h["a"]},filters:{getFormatDate:function(t){return new Date(t).getFullYear()+"年"+(new Date(t).getMonth()+1)+"月"+new Date(t).getDate()+"号"}}})],v);var f=v,p=f,g=(s("4b58"),s("3f1d"),s("2877")),b=Object(g["a"])(p,i,a,!1,null,"1117b7ae",null);e["default"]=b.exports},df6b:function(t,e,s){}}]);
//# sourceMappingURL=notice.4a0205d5.js.map