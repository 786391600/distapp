(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shopInfo"],{"0592":function(e,t,i){},"18b5":function(e,t,i){},"4e52":function(e,t,i){"use strict";var o=i("e31d"),s=i.n(o);s.a},8340:function(e,t,i){"use strict";var o=i("0592"),s=i.n(o);s.a},a1f7:function(e,t,i){"use strict";var o=i("18b5"),s=i.n(o);s.a},e31d:function(e,t,i){},faf8:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("page",{attrs:{title:e.pageTitle}},[i("div",{staticClass:"edit",attrs:{slot:"edit"},slot:"edit"}),i("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"shop-admin-box"},[i("cube-form",{ref:"editForm",attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[i("cube-form-group",{attrs:{legend:"商品编辑"}},[i("imageUpload",{model:{value:e.headImgList,callback:function(t){e.headImgList=t},expression:"headImgList"}}),e._l(e.fields,function(e,t){return i("cube-form-item",{key:t,attrs:{field:e}})})],2)],1)],1),i("editBox",{ref:"addForm1",attrs:{visible:e.showEditbox},on:{"update:visible":function(t){e.showEditbox=t}}},[i("editForm",{ref:"editForm",on:{cancel:function(t){e.showEditbox=!1},change:e.changeSuccess}})],1),i("editBox",{ref:"addForm1",attrs:{visible:e.showAddNav},on:{"update:visible":function(t){e.showAddNav=t}}},[i("addNav",{ref:"addNav",on:{cancel:function(t){e.showAddNav=!1},change:e.navChangeSuccess}})],1)],1)])},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("bd86")),r=i("d225"),n=i("b0b4"),l=i("308d"),c=i("6bb5"),u=i("4e2b"),d=i("9ab4"),m=i("60a3"),p=i("07e8"),b=i("51f3"),h=i("35c0"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cube-form",{ref:"editForm",attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[i("cube-form-group",{attrs:{legend:"商品编辑"}},[i("cube-form-item",{attrs:{field:e.fields[0]}}),i("cube-form-item",{attrs:{field:e.fields[1]}}),i("imageUpload",{model:{value:e.imageList,callback:function(t){e.imageList=t},expression:"imageList"}})],1),i("cube-form-group",{attrs:{legend:"商品规格"}},[e._l(e.model.menu,function(t,o){return i("div",{key:t.id,staticClass:"food-spec"},[i("div",{staticClass:"food-spec-item"},[i("div",[i("span",[e._v("名称")]),i("cube-input",{model:{value:t.spec,callback:function(i){e.$set(t,"spec",i)},expression:"menuItem.spec"}})],1),i("div",[i("span",[e._v("价格")]),i("cube-input",{attrs:{type:"number"},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"menuItem.price"}}),e._v("元\n        ")],1)]),i("div",{staticClass:"btn",on:{click:function(t){return e.deleteSpec(o)}}},[e._v("删除")])])}),i("text-button",{attrs:{block:!0},on:{click:e.addSpec}},[e._v("+添加规格")])],2),i("cube-form-group",{attrs:{legend:"商品类型"}},[i("cube-radio-group",{attrs:{options:e.goodsTypeOptions,position:"right","hollow-style":!0},model:{value:e.model.goodsType,callback:function(t){e.$set(e.model,"goodsType",t)},expression:"model.goodsType"}})],1),i("cube-form-group",[i("div",{staticClass:"submit-group"},[i("div",{staticClass:"btn reset",attrs:{inline:!0,outline:!0,type:"reset"},on:{click:e.resetClick}},[e._v("\n        取消\n      ")]),i("div",{staticClass:"btn submit",attrs:{inline:!0,type:"submit"},on:{click:e.submitClick}},[e._v("\n        保存\n      ")])])])],1)},v=[],g=(i("c5f6"),i("c88e")),y=i("5102"),O=i("7043");function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(i,!0).forEach(function(t){Object(a["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var w=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.validity={},e.valid=void 0,e.model={name:"",price:0,num:0,img:"",total:0,goodsType:"delivery"},e.imageList=[],e.isEdit=!1,e.fields=[{type:"input",modelKey:"name",label:"商品名称",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur",messages:{required:"商品名称必填"}},{type:"input",modelKey:"price",label:"价格",props:{placeholder:"请输入"},rules:{required:!0,custom:function(e){return e>0}},messages:{required:"价格必填",custom:"价格需要大于等于0元"},trigger:"blur"}],e.goodsTypeOptions=[{label:"帮手配送",value:"delivery"},{label:"到店核销",value:"arrival"}],e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(u["a"])(t,e),Object(n["a"])(t,[{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){e.preventDefault();var t=Object(g["a"])(this.model.menu)||[],i=this.model.id,o=t.filter(function(e){return e.spec&&e.price>0}).map(function(e,t){return e.id=i+"-"+t,e.price=Number(e.price),e});(!o||o.length<=0)&&(o=null),this.model.menu=o,this.model.price=Number(this.model.price),this.imageList.length>0?this.model.img=this.imageList[0]:this.model.img="http://mmbiz.qpic.cn/mmbiz_png/5XHic5LQPCDjZwNLhL8Opj5Mkpib5mZgFLSmZDOO7dQP3yezUpIMIucia9yLL0M2Cft1Z1nicCErZByDN7teCYefiaA/0",console.log(this.model,"this.modellllllllllllll"),this.$emit("change",this.model)}},{key:"setData",value:function(e){e.img&&this.$set(this,"imageList",[e.img]);var t=k({},Object(g["a"])(this.model),{},e);this.$set(this,"model",t)}},{key:"addSpec",value:function(){var e=this.model.menu&&this.model.menu.length>0?Object(g["a"])(this.model.menu):[],t=e&&e.length?e.length:0,i={id:this.model.id+""+t,num:0,price:0,spec:""};e.push(i),this.$set(this.model,"menu",e)}},{key:"deleteSpec",value:function(e){console.log(e,"");var t=Object(g["a"])(this.model.menu);t.splice(e,1),this.$set(this.model,"menu",t)}},{key:"submitClick",value:function(){this.$refs.editForm.submit(!1)}},{key:"resetClick",value:function(){this.$refs.editForm.reset()}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(m["c"]);Object(d["a"])([Object(m["b"])({default:""})],w.prototype,"shopId",void 0),Object(d["a"])([Object(m["b"])({default:""})],w.prototype,"shopName",void 0),w=Object(d["a"])([Object(m["a"])({name:"addForm",components:{imageUpload:y["a"],textButton:O["a"]}})],w);var I=w,$=I,L=(i("4e52"),i("a1f7"),i("2877")),x=Object(L["a"])($,f,v,!1,null,"34fa4d9e",null),C=x.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("cube-form",{attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[i("cube-form-group",{attrs:{legend:"分类编辑"}},[i("cube-form-item",{attrs:{field:e.fields[0]}})],1),i("cube-form-group",[i("cube-button",{attrs:{type:"submit"}},[e._v("保存")]),i("cube-button",{attrs:{type:"reset"}},[e._v("取消")])],1)],1)},D=[],_=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.validity={},e.valid=void 0,e.model={id:"",name:"",menu:[]},e.isEdit=!1,e.fields=[{type:"input",modelKey:"name",label:"分类名称",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur",messages:{required:"分类名称必填"}}],e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(u["a"])(t,e),Object(n["a"])(t,[{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){e.preventDefault(),this.$emit("change",this.model)}},{key:"setData",value:function(e){this.$set(this,"model",e)}},{key:"deleteSpec",value:function(e){console.log(e,"");var t=Object(g["a"])(this.model.menu);t.splice(e,1),this.$set(this.model,"menu",t)}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(m["c"]);Object(d["a"])([Object(m["b"])({default:""})],_.prototype,"shopId",void 0),Object(d["a"])([Object(m["b"])({default:""})],_.prototype,"shopName",void 0),_=Object(d["a"])([Object(m["a"])({name:"addForm"})],_);var H=_,F=H,N=(i("8340"),Object(L["a"])(F,P,D,!1,null,"3475db46",null)),E=N.exports;function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(i,!0).forEach(function(t){Object(a["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var S=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showEditbox=!1,e.showAddNav=!1,e.pageTitle="店铺信息",e.data=[],e.currentIndex=0,e.modelIndex=0,e.headImgList=[],e.model={title:"",markLight:""},e.imageList=[],e.isEdit=!1,e.fields=[{type:"input",modelKey:"title",label:"店铺名称",props:{placeholder:"请输入"},rules:{required:!0},trigger:"blur",messages:{required:"店铺名称必填"}},{type:"input",modelKey:"markLight",label:"所属餐厅",props:{placeholder:"请输入"},rules:{required:!1},trigger:"blur",messages:{required:"店铺名称必填"}},{type:"submit",label:"保存"}],e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(u["a"])(t,e),Object(n["a"])(t,[{key:"created",value:function(){var e=Object(g["a"])(this.$route.params);this.model={title:e.title,markLight:e.markLight},this.headImgList=[e.headImg]}},{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),console.log(this.headImgList,"iiiiiiiiiiiiii");var i=q({},this.model,{headImg:this.headImgList[0]||'"http://mmbiz.qpic.cn/mmbiz_jpg/5XHic5LQPCDh6os0mLo4IgYAfsHUicgR1ic3RsGfo19PkzF5ictOueZ9ktuOyuC4XbwAADNbrMibjuicy1JYwojhG36w/0"'});this.$store.dispatch("updateShopInfoByObj",{shopId:this.shopId,value:i}).then(function(e){e.success&&t.$createDialog({type:"alert",content:"保存成功",onConfirm:function(e){t.$router.push({name:"businessManagement",params:{id:t.shopId,oprate:"update",data:i}})}}).show()})}},{key:"showToastType",value:function(){var e=this.$createToast({txt:"保存成功",type:"correct"});e.show()}},{key:"shopId",get:function(){return this.$route.params.id}},{key:"shopName",get:function(){return this.$route.query.shopName}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(m["c"]);S=Object(d["a"])([Object(m["a"])({components:{page:p["a"],rightBox:b["a"],editBox:h["a"],editForm:C,addNav:E,textButton:O["a"],imageUpload:y["a"]}})],S);var A=S,B=A,z=Object(L["a"])(B,o,s,!1,null,null,null);t["default"]=z.exports}}]);
//# sourceMappingURL=shopInfo.ae12c715.js.map