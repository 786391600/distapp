{"version":3,"sources":["webpack:///./src/views/pay/index.vue?c51f","webpack:///./src/views/pay/index.vue?b026","webpack:///./src/views/pay/index.vue","webpack:///./src/views/pay/index.vue?0384","webpack:///./src/views/pay/index.vue?41b0","webpack:///./src/views/pay/index.vue?97b3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","setHouseId","_v","_s","_f","totalCost","attrs","tabBarList","tabBarChange","model","value","callback","$$v","selectedLabelDefault","expression","checkboxChange","checkList","_l","item","index","id","disabled","buildDate","cost","costName","type","billList","length","_e","isShowMore","showMoreClick","directives","name","rawName","actions","clickHandler","staticRenderFns","phone","openid","fields","modelKey","label","props","placeholder","rules","required","valid","undefined","validity","options","time","sendMsgDisabled","isVerification","jump","text","action","selectCost","isMounted","houseId","page","result","console","log","dirty","firstInvalidFieldIndex","query","$route","code","toast","txt","show","$store","dispatch","then","response","success","data","$router","replace","path","sessionId","commit","userInfo","getWeiXinConfig","getBillListByHouseId","hide","state","stateArr","split","getBindingInfo","content","icon","limit","list","initCheckbox","concat","arr","forEach","push","fenToYuan","computedPrice","num","isNaN","toFixed","url","window","location","href","res","config","debug","appId","timestamp","nonceStr","signature","jsApiList","ready","error","err","that","rqBillList","fee","body","payData","chooseWXPay","timeStamp","package","signType","paySign","$createToast","mask","onTimeout","propB","default","components","houseSelect","filters","getFormatDate","date","Date","getFullYear","getMonth","getDate","billType","component"],"mappings":"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","file":"js/pay.027db914.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"payBox\"},[_c('houseSelect',{on:{\"change\":_vm.setHouseId}}),_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"expense\"},[_c('div',{staticClass:\"num\"},[_vm._v(_vm._s(_vm._f(\"fenToYuan\")(_vm.totalCost)))]),_c('div',{staticClass:\"text\"},[_vm._v(\"欠缴费用\")])])]),_c('div',{staticClass:\"swipe-wrapper\"},[_c('cube-tab-bar',{attrs:{\"data\":_vm.tabBarList},on:{\"change\":_vm.tabBarChange},model:{value:(_vm.selectedLabelDefault),callback:function ($$v) {_vm.selectedLabelDefault=$$v},expression:\"selectedLabelDefault\"}}),_c('cube-checkbox-group',{on:{\"input\":_vm.checkboxChange},model:{value:(_vm.checkList),callback:function ($$v) {_vm.checkList=$$v},expression:\"checkList\"}},[_vm._l((_vm.billList),function(item,index){return _c('div',{staticClass:\"bill_list\"},[_c('cube-checkbox',{attrs:{\"option\":{value: item.id, disabled: _vm.selectedLabelDefault === 'complete'}}},[_c('div',{staticClass:\"bill_list_box\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"getFormatDate\")(item.buildDate)))]),_c('span',[_vm._v(_vm._s(_vm._f(\"fenToYuan\")(item.cost)))])]),_c('div',{staticClass:\"bill_list_box\"},[(!item.costName)?_c('span',[_vm._v(_vm._s(_vm._f(\"billType\")(item.type)))]):_c('span',[_vm._v(_vm._s(item.costName))])])])],1)}),(_vm.billList.length === 0 && _vm.selectedLabelDefault === 'incomplete')?_c('div',{staticClass:\"more\"},[_vm._v(\"您没有未缴账单\")]):_vm._e(),(_vm.selectedLabelDefault === 'complete' && _vm.isShowMore)?_c('div',{staticClass:\"more\",on:{\"click\":_vm.showMoreClick}},[_vm._v(\"加载更多\")]):_vm._e(),(_vm.selectedLabelDefault === 'complete' && !_vm.isShowMore)?_c('div',{staticClass:\"more\"},[_vm._v(\"没有数据了\")]):_vm._e()],2)],1),_c('cube-toolbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedLabelDefault === 'incomplete'),expression:\"selectedLabelDefault === 'incomplete'\"}],attrs:{\"actions\":_vm.actions},on:{\"click\":_vm.clickHandler}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator'\r\nimport wx from 'weixin-js-sdk'\r\nimport { formatDate } from '@/until/index'\r\nimport houseSelect from '@/components/common-components/houseSelect'\r\n@Component({\r\n  components: {\r\n    houseSelect\r\n  },\r\n  filters: {\r\n    getFormatDate (date: any) {\r\n      return new Date(date).getFullYear() + '年' + (new Date(date).getMonth() + 1) + '月' + new Date(date).getDate()\r\n    },\r\n    fenToYuan (num: any) {\r\n      if (typeof num !== 'number' || isNaN(num)) return null\r\n      return '¥' + (num / 100).toFixed(2)\r\n    },\r\n    billType (type: any) {\r\n      if (type === 'property') {\r\n        return '物业费用'\r\n      } else if (type === 'parking') {\r\n        return '停车费用'\r\n      } else if (type === 'water') {\r\n        return '水费'\r\n      } else {\r\n        return '其他费用'\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class Home extends Vue {\r\n  $createDialog : any\r\n  $createToast : any\r\n  // 声明周期钩子\r\n  model = { phone: '', openid: '' }\r\n  fields =[{ type: 'input', modelKey: 'phone', label: '手机号', props: { placeholder: '请输入' }, rules: { required: true, type: 'tel' } }, { type: 'input', modelKey: 'verificationCode', label: '验证码', props: { placeholder: '请输入', type: 'text' }, rules: { required: true } }]\r\n  valid = undefined\r\n  validity = {}\r\n  options = {}\r\n  time = 60 // 验证码等待时间\r\n  sendMsgDisabled = false\r\n  isVerification = false // 是否需要开启验证码\r\n  openid = ''\r\n  jump = '' // 登陆成功跳转页\r\n  isShowMore = true\r\n\r\n  actions = [\r\n    {\r\n      text: '合计 ¥00.00',\r\n      action: 'moreMoney'\r\n    },\r\n    {\r\n      type: 'button',\r\n      text: '<div class=\"payButton\">立即缴费</div>',\r\n      action: 'payButtonClick'\r\n    }\r\n  ]\r\n  selectCost = 0 // 选择总费用 单位 分\r\n  totalCost = 0 // 总费用 单位 分\r\n  checkList: any = []\r\n  billList = []\r\n  isMounted = false\r\n  houseId = ''\r\n  // tab切换配置\r\n  selectedLabelDefault = 'incomplete'\r\n  tabBarList = [{\r\n    label: '未缴账单',\r\n    value: 'incomplete'\r\n  }, {\r\n    label: '已缴账单',\r\n    value: 'complete'\r\n  }]\r\n\r\n  // 已缴费用\r\n  page = 1\r\n  activated () {\r\n    // this.pageInit()\r\n  }\r\n  @Prop({ default: 'default value' }) readonly propB!: string\r\n\r\n  // 计算属性\r\n  get computedMsg () {\r\n    return 'computed ' + this.propB\r\n  }\r\n  validateHandler (result : any) {\r\n    this.validity = result.validity\r\n    this.valid = result.valid\r\n    console.log(result)\r\n    console.log('validity', result.validity, result.valid, result.dirty, result.firstInvalidFieldIndex)\r\n  }\r\n  getBindingInfo () {\r\n    let query = this.$route.query\r\n    if (query.code) {\r\n      const toast = this['$createToast']({\r\n        time: 0,\r\n        txt: '数据获取中...'\r\n      })\r\n      toast.show()\r\n      this.$store.dispatch('getCodeInfo', { code: query.code }).then((response) => {\r\n        if (response.success) {\r\n          if (response.data.openid) {\r\n            this.openid = response.data.openid\r\n            this.$router.replace({ path: '/login', query: { openid: response.data.openid, jump: '/home' } })\r\n          } else if (response.data.sessionId) {\r\n            this.$store.commit('SET_SESSION_ID', response.data.sessionId)\r\n            this.$store.commit('SET_USER_INFO', response.data.userInfo)\r\n            this.getWeiXinConfig()\r\n            this.getBillListByHouseId()\r\n          }\r\n        }\r\n        toast.hide()\r\n      })\r\n    } else {\r\n      console.log('不是微信登陆')\r\n    }\r\n  }\r\n  pageInit () {\r\n    let query = this.$route.query\r\n    let state = query.state\r\n    let houseId = ''\r\n    if (state) {\r\n      let stateArr = state.split('@')\r\n      if (stateArr[0] === 'houseId') {\r\n        houseId = stateArr[1]\r\n      }\r\n    }\r\n    if (query.houseId) {\r\n      houseId = query.houseId\r\n    }\r\n    if (houseId) {\r\n      this.houseId = houseId\r\n    } else {\r\n      this['$createDialog']({\r\n        type: 'alert',\r\n        content: '登陆方式错误',\r\n        icon: 'cubeic-wrong'\r\n      }).show()\r\n      return\r\n    }\r\n    if (this.$store.state.sessionId) {\r\n      this.page = 1\r\n      this.billList = []\r\n      this.getWeiXinConfig()\r\n      this.getBillListByHouseId()\r\n    } else if (query.code) {\r\n      this.getBindingInfo()\r\n    }\r\n  }\r\n  getBillListByHouseId () {\r\n    const toast = this['$createToast']({\r\n      time: 0,\r\n      txt: '数据获取中...'\r\n    })\r\n    toast.show()\r\n    this.$store.dispatch('getBillListByHouseId', { houseId: this.houseId, type: this.selectedLabelDefault, page: this.page, limit: 10 }).then((response) => {\r\n      if (response.success) {\r\n        if (this.selectedLabelDefault === 'incomplete') {\r\n          this.billList = response.data.list\r\n          this.initCheckbox()\r\n        } else {\r\n          if (response.data.list.length > 0) {\r\n            this.billList = this.billList.concat(response.data.list)\r\n          } else {\r\n            this.isShowMore = false\r\n          }\r\n        }\r\n      }\r\n      toast.hide()\r\n    })\r\n  }\r\n  initCheckbox () {\r\n    let arr:any = []\r\n    let totalCost = 0\r\n    this.billList.forEach((item:any) => {\r\n      arr.push(item.id)\r\n      totalCost += item.cost\r\n    })\r\n    this.totalCost = totalCost\r\n    this.selectCost = totalCost\r\n    this.actions[0].text = this.fenToYuan(totalCost)\r\n    this.checkList = arr\r\n  }\r\n  computedPrice (list: any) {\r\n    let totalCost = 0\r\n    this.billList.forEach((item) => {\r\n      list.forEach((id:any) => {\r\n        if (item.id === id) {\r\n          totalCost += item.cost\r\n        }\r\n      })\r\n    })\r\n    this.selectCost = totalCost\r\n    this.actions[0].text = this.fenToYuan(totalCost)\r\n  }\r\n  checkboxChange (list: any) {\r\n    this.computedPrice(list)\r\n  }\r\n  clickHandler (item: any) {\r\n    if (item.action) {\r\n      this[item.action](item)\r\n    }\r\n  }\r\n  fenToYuan (num: any) {\r\n    if (typeof num !== 'number' || isNaN(num)) return null\r\n    return '合计 ¥' + (num / 100).toFixed(2)\r\n  }\r\n  getWeiXinConfig () {\r\n    // let url = window.location.origin + window.location.pathname\r\n    let url = window.location.href\r\n    this.$store.dispatch('getWeixinConfig', { url: url }).then((res)=>{\r\n      console.log('获取微信配置成功', res)\r\n      if (res.success) {\r\n        let config = res.data\r\n        wx.config({\r\n          debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n          appId: config.appId, // 必填，公众号的唯一标识\r\n          timestamp: config.timestamp, // 必填，生成签名的时间戳\r\n          nonceStr: config.nonceStr, // 必填，生成签名的随机串\r\n          signature: config.signature, // 必填，签名\r\n          jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表\r\n        })\r\n      }\r\n      wx.ready(function() {\r\n        console.log('ready========')\r\n      })\r\n      wx.error(function(err:any) {\r\n        console.log(err)\r\n        console.log('errrrrrrrrrrrrrr')\r\n      })\r\n    })\r\n  }\r\n\r\n  payButtonClick () {\r\n    let that = this\r\n    if (this.checkList.length === 0) {\r\n      that['$createDialog']({\r\n        type: 'alert',\r\n        content: '请选择账单',\r\n        icon: 'cubeic-important'\r\n      }).show()\r\n    }\r\n    let query = {}\r\n    query.rqBillList = this.checkList\r\n    query.fee = this.selectCost\r\n    query.body = '物业缴费'\r\n    this.$store.dispatch('setUppropertyOrder', query).then((response) => {\r\n      if (response.success) {\r\n        let payData = response.data\r\n        wx.chooseWXPay({\r\n          timestamp: payData.timeStamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\r\n          nonceStr: payData.nonceStr, // 支付签名随机串，不长于 32 位\r\n          package: payData.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\\*\\*\\*）\r\n          signType: payData.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\r\n          paySign: payData.paySign, // 支付签名\r\n          success: function (res) {\r\n            // 支付成功后的回调函数\r\n            const toast = that.$createToast({\r\n              time: 2000,\r\n              txt: '订单处理中...',\r\n              mask: true,\r\n              onTimeout: () => {\r\n                that.getBillListByHouseId()\r\n                that['$createDialog']({\r\n                  type: 'alert',\r\n                  content: '缴费成功',\r\n                  icon: 'cubeic-ok'\r\n                }).show()\r\n              }\r\n            })\r\n            toast.show()\r\n          },\r\n          error: function () {\r\n\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  tabBarChange (value:any) {\r\n    this.page = 1\r\n    this.isShowMore = true\r\n    this.billList = []\r\n    this.getBillListByHouseId()\r\n  }\r\n  showMoreClick () {\r\n    this.page++\r\n    this.getBillListByHouseId()\r\n  }\r\n  setHouseId (id:any) {\r\n    if (this.houseId !== id) {\r\n      this.houseId = id\r\n      this.getWeiXinConfig()\r\n      this.getBillListByHouseId()\r\n    }\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e8861e48&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e8861e48&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8861e48\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e8861e48&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e8861e48&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\""],"sourceRoot":""}