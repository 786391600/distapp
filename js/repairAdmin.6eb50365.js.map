{"version":3,"sources":["webpack:///./src/views/repair/repairAdmin.vue?97d8","webpack:///./src/views/repair/repairAdmin.vue?7672","webpack:///./src/views/repair/repairAdmin.vue","webpack:///./src/views/repair/repairAdmin.vue?29fb","webpack:///./src/views/repair/repairAdmin.vue?f2e3","webpack:///./src/views/repair/repairAdmin.vue?e87e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","tabBarList","on","tabBarChange","model","value","callback","$$v","selectedLabelDefault","expression","_l","item","_v","_s","_f","time","type","name","details","address","directives","rawName","$event","updateRepairState","id","showMoreClick","_e","isShowMore","staticRenderFns","houseId","label","page","repairList","pageInit","result","validity","valid","console","log","dirty","firstInvalidFieldIndex","query","$route","code","toast","txt","show","$store","dispatch","then","response","success","data","openid","$router","replace","path","jump","sessionId","commit","userInfo","getHouseList","hide","state","getBindingInfo","getRepairList","info","houseList","forEach","obj","list","length","concat","content","icon","text","account_info","build_info","unitNum","floorNum","roomNum","default","components","HelloWorld","filters","getFormatDate","date","Date","getFullYear","getMonth","getDate","getRepairType","component"],"mappings":"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","file":"js/repairAdmin.6eb50365.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=style&index=0&id=1b509ea3&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=style&index=0&id=1b509ea3&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"repair\"},[_c('div',{staticClass:\"swipe-wrapper\"},[_c('cube-tab-bar',{attrs:{\"data\":_vm.tabBarList},on:{\"change\":_vm.tabBarChange},model:{value:(_vm.selectedLabelDefault),callback:function ($$v) {_vm.selectedLabelDefault=$$v},expression:\"selectedLabelDefault\"}}),_c('div',{staticClass:\"repairList\"},[_vm._l((_vm.repairList),function(item){return _c('div',{staticClass:\"repairList-box\"},[_c('div',{staticClass:\"repairList-box-head\"},[_c('span',[_vm._v(_vm._s(_vm._f(\"getFormatDate\")(item.time)))]),(_vm.selectedLabelDefault === 'processed')?_c('span',{staticClass:\"processed\"},[_vm._v(\"已完成\")]):_c('span',{staticClass:\"unprocessed\"},[_vm._v(\"未完成\")])]),_c('div',{staticClass:\"repairList-box-box\"},[_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"报修类型\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"getRepairType\")(item.type)))])]),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"报修人\")]),_c('span',[_vm._v(_vm._s(item.name))])]),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"报修详情\")]),_c('span',[_vm._v(_vm._s(item.details))])]),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"报修地址\")]),_c('span',[_vm._v(_vm._s(item.address))])])]),_c('cube-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedLabelDefault === \"unprocessed\"),expression:\"selectedLabelDefault === \\\"unprocessed\\\"\"}],staticClass:\"repairBtn\",on:{\"click\":function($event){return _vm.updateRepairState(item.id)}}},[_vm._v(\"确认完成\")])],1)}),(_vm.isShowMore)?_c('div',{staticClass:\"more\",on:{\"click\":_vm.showMoreClick}},[_vm._v(\"加载更多\")]):_vm._e(),(!_vm.isShowMore)?_c('div',{staticClass:\"more\"},[_vm._v(\"没有数据了\")]):_vm._e()],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator'\r\nimport HelloWorld from '@/components/HelloWorld.vue' // @ is an alias to /src\r\nimport wx from 'weixin-js-sdk'\r\nimport { formatDate } from '@/until/index'\r\n\r\n@Component({\r\n  components: {\r\n    HelloWorld\r\n  },\r\n  filters: {\r\n     getFormatDate (date: any) {\r\n      return new Date(date).getFullYear() + '年' + (new Date(date).getMonth() + 1) + '月' + new Date(date).getDate() + '号'\r\n    },\r\n    getRepairType (type: any) {\r\n      if (type === 'type1') {\r\n        return '开锁服务'\r\n      } else if (type === 'type2') {\r\n        return '公共报修'\r\n      } else if (type === 'type3') {\r\n        return '个人报修'\r\n      } else {\r\n        return '其他报修'\r\n      }\r\n    }\r\n  }\r\n})\r\nexport default class Home extends Vue {\r\n  $createDialog : any\r\n  $createToast : any\r\n  // 声明周期钩子\r\n  model = { details: '', type: 'type1' }\r\n\r\n  houseId = ''\r\n  // tab切换配置\r\n  selectedLabelDefault = 'unprocessed'\r\n  tabBarList = [{\r\n    label: '未处理',\r\n    value: 'unprocessed'\r\n  }, {\r\n    label: '已处理',\r\n    value: 'processed'\r\n  }]\r\n\r\n  // \r\n  page = 1\r\n  isShowMore = true\r\n  repairList = []\r\n\r\n  activated () {\r\n    // this.getWeiXinConfig()\r\n    this.pageInit()\r\n  }\r\n\r\n  @Prop({ default: 'default value' }) readonly propB!: string\r\n\r\n  validateHandler (result : any) {\r\n    this.validity = result.validity\r\n    this.valid = result.valid\r\n    console.log(result)\r\n    console.log('validity', result.validity, result.valid, result.dirty, result.firstInvalidFieldIndex)\r\n  }\r\n  getBindingInfo () {\r\n    let query = this.$route.query\r\n    if (query.code) {\r\n      const toast = this['$createToast']({\r\n        time: 0,\r\n        txt: '数据获取中...'\r\n      })\r\n      toast.show()\r\n      this.$store.dispatch('getCodeInfo', { code: query.code }).then((response) => {\r\n        if (response.success) {\r\n          if (response.data.openid) {\r\n            this.openid = response.data.openid\r\n            this.$router.replace({ path: '/login', query: { openid: response.data.openid, jump: '/home' } })\r\n          } else if (response.data.sessionId) {\r\n            this.$store.commit('SET_SESSION_ID', response.data.sessionId)\r\n            this.$store.commit('SET_USER_INFO', response.data.userInfo)\r\n            this.getHouseList()\r\n          }\r\n        }\r\n        toast.hide()\r\n      })\r\n    } else {\r\n      console.log('不是微信登陆')\r\n    }\r\n  }\r\n  pageInit () {\r\n    let query = this.$route.query\r\n    if (this.$store.state.sessionId) {\r\n      this.tabBarChange()\r\n    } else if (query.code && !this.$store.state.sessionId) {\r\n      this.getBindingInfo()\r\n    }\r\n  }\r\n\r\n  tabBarChange (value:any) {\r\n    this.page = 1\r\n    this.repairList = []\r\n    this.isShowMore = true\r\n    this.getRepairList()\r\n  }\r\n\r\n  get houseOptions () {\r\n    this.$store.state.houseList.forEach((obj) =>{\r\n      obj.value = obj.id\r\n      obj.text = obj.account_info[0].name + ' ' + obj.build_info[0].name + ' '+ obj.unitNum + '单元' + obj.floorNum + '层' + obj.roomNum + '室'\r\n    })\r\n    return this.$store.state.houseList\r\n  }\r\n  get userInfo () {\r\n    return this.$store.state.userInfo\r\n  }\r\n\r\n  getHouseInfo () {\r\n    let info = {}\r\n    this.$store.state.houseList.forEach((obj) =>{\r\n      if (obj.id === this.houseId) {\r\n        info = obj\r\n      }\r\n    })\r\n    return info\r\n  }\r\n\r\n  getRepairList () {\r\n    const toast = this['$createToast']({\r\n      time: 0,\r\n      txt: '数据获取中...'\r\n    })\r\n    toast.show()\r\n    this.$store.dispatch('getRepairList', { page: this.page, type: this.selectedLabelDefault }).then((response) => {\r\n      if (response.success) {\r\n          if (response.data.list.length > 0) {\r\n            this.repairList = this.repairList.concat(response.data.list)\r\n          } else {\r\n            this.isShowMore = false\r\n          }\r\n      }\r\n      toast.hide()\r\n    })\r\n  }\r\n\r\n  showMoreClick () {\r\n    this.page++\r\n    this.getRepairList()\r\n  }\r\n\r\n  updateRepairState (id: String) {\r\n    this.$store.dispatch('updateRepairState', { id: id }).then((response) => {\r\n      if (response.success) {\r\n        this['$createDialog']({\r\n          type: 'alert',\r\n          content: '处理完成',\r\n          icon: 'cubeic-ok'\r\n        }).show()\r\n        this.tabBarChange()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./repairAdmin.vue?vue&type=template&id=1b509ea3&scoped=true&\"\nimport script from \"./repairAdmin.vue?vue&type=script&lang=ts&\"\nexport * from \"./repairAdmin.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./repairAdmin.vue?vue&type=style&index=0&id=1b509ea3&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\nimport style1 from \"./repairAdmin.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b509ea3\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./repairAdmin.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\""],"sourceRoot":""}