(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["surchargeConfig"],{"07e8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cube-page",class:e.type},[a("header",{staticClass:"header"},[a("h1",[e._v(e._s(e.title))]),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),a("div",{staticClass:"header-edit"},[e._t("edit")],2)]),a("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[a("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},n=[],s=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),b=function(e){function t(){return Object(s["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"back",value:function(){this.$router.go(-1)}},{key:"created",value:function(){console.log("创建page ===")}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])()],b.prototype,"msg",void 0),Object(u["a"])([Object(d["b"])({default:"",required:!0})],b.prototype,"title",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"type",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"desc",void 0),Object(u["a"])([Object(d["b"])({default:""})],b.prototype,"content",void 0),Object(u["a"])([Object(d["b"])({default:!0})],b.prototype,"isBack",void 0),b=Object(u["a"])([Object(d["a"])({})],b);var f=b,p=f,v=(a("2de2"),a("2877")),h=Object(v["a"])(p,i,n,!1,null,"75d201ee",null);t["a"]=h.exports},2684:function(e,t,a){"use strict";var i=a("4970"),n=a.n(i);n.a},"2de2":function(e,t,a){"use strict";var i=a("4867"),n=a.n(i);n.a},"35c0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade"}},[e.visible?a("div",{staticClass:"edit-box"},[e._t("default")],2):e._e()])},n=[],s=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),b=function(e){function t(){return Object(s["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"mounted",value:function(){}},{key:"hide",value:function(){this.$emit("update:visible",!1)}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])({default:!1})],b.prototype,"visible",void 0),b=Object(u["a"])([Object(d["a"])({components:{}})],b);var f=b,p=f,v=(a("fa15"),a("2877")),h=Object(v["a"])(p,i,n,!1,null,"d5ca93a2",null);t["a"]=h.exports},"47e5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page",{attrs:{title:e.pageTitle}},[a("div",{staticClass:"edit",attrs:{slot:"edit"},slot:"edit"}),a("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"shop-admin-box"},[a("cube-form",{ref:"editForm",attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[a("cube-form-group",{attrs:{legend:"附加费设置"}},[a("div",{staticClass:"ladder"},[e._l(e.surchargeConfig,function(t,i){return a("div",{key:i,staticClass:"ladder-box"},[a("span",[a("cube-input",{model:{value:t.label,callback:function(a){e.$set(t,"label",a)},expression:"lItem.label"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("名称")])])],1),a("div",[a("div",[e._v("触发方式")]),a("cube-radio-group",{attrs:{horizontal:!0,options:e.options2,position:"right","hollow-style":!0},model:{value:t.trigger,callback:function(a){e.$set(t,"trigger",a)},expression:"lItem.trigger"}})],1),"bycost"===t.trigger?a("div",[e._l(t.rule,function(t,n){return a("div",{key:n,staticStyle:{display:"flex"}},[a("span",[a("cube-input",{attrs:{min:0},model:{value:t.section[0],callback:function(a){e.$set(t.section,0,a)},expression:"ruleItem.section[0]"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("价格-大于等于")])])],1),a("span",[a("cube-input",{attrs:{min:0},model:{value:t.section[1],callback:function(a){e.$set(t.section,1,a)},expression:"ruleItem.section[1]"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("小于")])])],1),a("span",[a("cube-input",{attrs:{min:0},model:{value:t.fee,callback:function(a){e.$set(t,"fee",a)},expression:"ruleItem.fee"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("费用")])])],1),a("span",{on:{click:function(t){return e.deleteSection(i,n)}}},[e._v("删除")])])}),a("div",[a("cube-checkbox-group",{attrs:{options:e.sultoptions,horizontal:!0,"hollow-style":!0},model:{value:t.sultType,callback:function(a){e.$set(t,"sultType",a)},expression:"lItem.sultType"}})],1),a("cube-button",{on:{click:function(t){return e.addRule(i)}}},[e._v("新增规则")])],2):e._e(),a("span",{on:{click:function(t){return e.deleteConfig(i)}}},[e._v("删除")])])}),a("cube-button",{attrs:{inline:!0},on:{click:e.addLadder}},[e._v("新增附加费")])],2),a("div",[a("cube-button",{on:{click:e.submitHandler}},[e._v("保存")])],1)])],1)],1)])])},n=[],s=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),b=a("07e8"),f=a("51f3"),p=a("35c0"),v=a("c88e"),h=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.showEditbox=!1,e.showAddNav=!1,e.pageTitle="附加费设置",e.sultoptions=[{label:"外卖",value:"delivery"},{label:"自提",value:"selflifting"}],e.options2=[{label:"按费用",value:"bycost"}],e.data=[],e.currentIndex=0,e.modelIndex=0,e.headImgList=[],e.model={startPoint:0,critical:0},e.imageList=[],e.isEdit=!1,e.fields=[],e.surcharge=[],e.surchargeConfig=[{label:"",trigger:"bycost",rule:[{section:[0,0],fee:0}],sultType:[]}],e.savefields=[{type:"submit",label:"保存"}],e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"created",value:function(){var e=Object(v["a"])(this.$route.params);this.pageTitle=e.title,this.initConfig(e)}},{key:"addLadder",value:function(){this.surchargeConfig.push({label:"",trigger:"bycost",rule:[{section:[0,0],fee:0}],sultType:[]})}},{key:"addRule",value:function(e){if(this.surchargeConfig[e].rule&&this.surchargeConfig[e].rule.length>0){var t=this.surchargeConfig[e].rule[this.surchargeConfig[e].rule.length-1].section[1];this.surchargeConfig[e].rule.push({section:[t,0],fee:0})}else this.surchargeConfig[e].rule.push({section:[0,0],fee:0})}},{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var a=this.ladderValidate();if(a){var i={extracharge:this.surchargeConfig};this.$store.dispatch("updateShopInfoByObj",{shopId:this.shopId,value:i}).then(function(e){e.success&&t.$createDialog({type:"alert",content:"保存成功",onConfirm:function(e){t.$router.push({name:"businessManagement",params:{id:t.shopId,oprate:"update",data:i}})}}).show()})}}},{key:"ladderValidate",value:function(){var e=this,t=!0;return this.surchargeConfig.some(function(a){if(!a.label){var i=e.$createToast({txt:"请输入附加费名称",type:"error"});return i.show(),t=!1,!0}var n=a.rule;if(0===n.length){var s=e.$createToast({txt:"请添加费用规则",type:"error"});return s.show(),t=!1,!0}var r=!1,o=null;if(n.some(function(a,i){if(n.length-1!==i&&a.section[1]<=a.section[0]){var s=e.$createToast({txt:"梯费用结束值值需大于开始值",type:"error"});return s.show(),t=!1,!0}if(o){if(o.section[1]!==a.section[0]){r=!0;var c=e.$createToast({txt:"后阶梯费用开始值需等于前阶梯费用结束值",type:"error"});return c.show(),t=!1,!0}}else o=a}),r)return!0}),t}},{key:"showToastType",value:function(){var e=this.$createToast({txt:"保存成功",type:"correct"});e.show()}},{key:"deleteConfig",value:function(e){this.surchargeConfig.splice(e,1)}},{key:"deleteSection",value:function(e,t){this.surchargeConfig[e].rule.splice(t,1)}},{key:"validateHandler",value:function(){}},{key:"initConfig",value:function(e){e&&e.extracharge&&(this.surchargeConfig=e.extracharge.map(function(e){return{label:e.label,trigger:e.trigger,rule:e.rule,sultType:e.sultType||[]}}))}},{key:"shopId",get:function(){return this.$route.params.id}},{key:"shopName",get:function(){return this.$route.query.shopName}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(d["c"]);h=Object(u["a"])([Object(d["a"])({components:{page:b["a"],rightBox:f["a"],editBox:p["a"]}})],h);var g=h,y=g,m=(a("2684"),a("2877")),j=Object(m["a"])(y,i,n,!1,null,null,null);t["default"]=j.exports},4867:function(e,t,a){},4970:function(e,t,a){},"51f3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-box"},e._l(e.list,function(t,i){return a("div",{key:i,staticClass:"box",on:{click:function(a){return e.boxClick(t.action)}}},[t.icon?a("i",{class:["iconfont",t.icon]}):a("span",[e._v(e._s(t.text))])])}),0)},n=[],s=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),u=a("9ab4"),d=a("60a3"),b=function(e){function t(){return Object(s["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"boxClick",value:function(e){this.$emit("click",e)}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])()],b.prototype,"list",void 0),b=Object(u["a"])([d["a"]],b);var f=b,p=f,v=(a("b493"),a("2877")),h=Object(v["a"])(p,i,n,!1,null,"1bd23a4e",null);t["a"]=h.exports},a387:function(e,t,a){},b493:function(e,t,a){"use strict";var i=a("a387"),n=a.n(i);n.a},c88e:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var i=a("7618");a("3b2b"),a("a481");var n=function e(t){var a;if("object"===Object(i["a"])(t))if(null===t)a=null;else if(t instanceof Date)a=t;else if(t instanceof Array){a=[];for(var n=0,s=t.length;n<s;n++)a.push(e(t[n]))}else for(var r in a={},t)a[r]=e(t[r]);else a=t;return a}},e835:function(e,t,a){},fa15:function(e,t,a){"use strict";var i=a("e835"),n=a.n(i);n.a}}]);
//# sourceMappingURL=surchargeConfig.e771bc79.js.map