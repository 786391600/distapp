(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cdtEditor"],{"053e":function(e,t,s){},"07e8":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cube-page",class:e.type},[s("header",{staticClass:"header"},[s("h1",[e._v(e._s(e.title))]),s("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),s("div",{staticClass:"header-edit"},[e._t("edit")],2)]),s("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[s("section",{directives:[{name:"show",rawName:"v-show",value:e.desc,expression:"desc"}],staticClass:"desc"},[e._t("desc",[e._v(e._s(e.desc))])],2),s("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},r=[],i=s("d225"),c=s("b0b4"),n=s("308d"),o=s("6bb5"),l=s("4e2b"),u=s("9ab4"),d=s("60a3"),h=function(e){function t(){return Object(i["a"])(this,t),Object(n["a"])(this,Object(o["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"back",value:function(){this.$router.back()}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])()],h.prototype,"msg",void 0),Object(u["a"])([Object(d["b"])({default:"",required:!0})],h.prototype,"title",void 0),Object(u["a"])([Object(d["b"])({default:""})],h.prototype,"type",void 0),Object(u["a"])([Object(d["b"])({default:""})],h.prototype,"desc",void 0),Object(u["a"])([Object(d["b"])({default:""})],h.prototype,"content",void 0),Object(u["a"])([Object(d["b"])({default:!0})],h.prototype,"isBack",void 0),h=Object(u["a"])([d["a"]],h);var v=h,p=v,b=(s("ca73"),s("2877")),f=Object(b["a"])(p,a,r,!1,null,"0717ebb4",null);t["a"]=f.exports},"170f":function(e,t,s){"use strict";var a=s("1f3f"),r=s.n(a);r.a},"1e42":function(e,t,s){"use strict";var a=s("053e"),r=s.n(a);r.a},"1f3f":function(e,t,s){},b13e:function(e,t,s){},ca73:function(e,t,s){"use strict";var a=s("b13e"),r=s.n(a);r.a},d32e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page",{attrs:{type:"form-def",title:"候补订单",isBack:!0}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"screen-header"},[s("div",[s("span",{on:{click:e.screenOpen}},[e._v("筛选"),s("i",{class:e.openScreen?"cubeic-pullup":"cubeic-pulldown"})])]),s("div",{staticClass:"screen-search",on:{click:e.screenClick}},[e._v("搜索")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.openScreen,expression:"openScreen"}],staticClass:"screen"},[s("cube-input",{model:{value:e.start,callback:function(t){e.start=t},expression:"start"}},[s("span",{staticClass:"screen-span",attrs:{slot:"prepend"},slot:"prepend"},[e._v("起点")])]),s("cube-input",{model:{value:e.end,callback:function(t){e.end=t},expression:"end"}},[s("span",{staticClass:"screen-span",attrs:{slot:"prepend"},slot:"prepend"},[e._v("终点")])]),s("div",{staticClass:"screen-bottom"},[s("cube-button",{staticClass:"screen-bottom-btn",attrs:{inline:!0,light:!0},on:{click:e.screenReset}},[e._v("重置")]),s("cube-button",{staticClass:"screen-bottom-btn",attrs:{inline:!0},on:{click:e.screenOpen}},[e._v("确定")])],1)],1),s("cube-checkbox-group",{attrs:{shape:"square","hollow-style":!0},on:{checked:e.orderChecked,"cancel-checked":e.orderCancelChecked},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.orderList,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!item.hide"}],key:a},[s("cube-checkbox",{staticClass:"checkbox",attrs:{option:t.out_trade_no+"@"+t.number+"@"+t.userId}},[s("p",{staticStyle:{"margin-right":"20px"}},[e._v(e._s(t.start)+"-"+e._s(t.end))]),s("p",{staticClass:"number"},[e._v("人数:"+e._s(t.number)+"【候补中】")]),s("p",[e._v("联系电话: "+e._s(t.phone))]),s("p",[e._v("姓名: "+e._s(t.name))])]),s("p",[s("cube-button",{on:{click:function(s){return e.refound(t,a)}}},[e._v("点击退票")])],1)],1)}),0),s("cube-button",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"showMore"}],staticClass:"btn",on:{click:e.pageTurning}},[e._v("查看更多")]),s("p",{directives:[{name:"show",rawName:"v-show",value:!e.showMore,expression:"!showMore"}],staticClass:"noMore"},[e._v("没有更多了")]),s("div",{staticClass:"footer"}),s("cube-toolbar",{attrs:{actions:e.actions},on:{click:e.clickHandler}}),s("cube-drawer",{ref:"drawer",attrs:{data:e.drawerdata,"selected-index":e.selectedIndex}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v("车辆选择")]),s("cube-drawer-panel",{attrs:{data:e.drawerdata}},[e._l(e.drawerdata,function(t,a){return s("cube-drawer-item",{directives:[{name:"show",rawName:"v-show",value:t.id!==e.carId,expression:"item.id !== carId"}],key:a,attrs:{item:t,index:a}},[s("p",{on:{click:function(s){return e.drawerSelect(t)}}},[e._v("车牌："+e._s(t.licensePlate?t.licensePlate:"未填写"))])])}),s("cube-drawer-item",[s("span",[e._v("加载更多")])])],2)],1)],1)])},r=[],i=(s("28a5"),s("d225")),c=s("b0b4"),n=s("308d"),o=s("6bb5"),l=s("4e2b"),u=s("9ab4"),d=s("60a3"),h=s("fdab"),v=s("07e8"),p=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(n["a"])(this,Object(o["a"])(t).apply(this,arguments)),e.start="",e.end="",e.page=1,e.limit=10,e.count=0,e.carNums=0,e.checkList=[],e.orderList=[],e.selectNum=0,e.selectCarId="",e.drawerdata=[{}],e.selectedIndex=[],e.openScreen=!1,e.actions=[{text:"已选择：0人"},{text:"选择车辆",type:"button",action:"selectCar"},{text:"确认分配",type:"button",action:"distributionOrder"},{text:"候补转正",type:"button",action:"cdtHandle"}],e}return Object(l["a"])(t,e),Object(c["a"])(t,[{key:"created",value:function(){this.checkList=[],this.selectNum=0,this.getOrderList({})}},{key:"getOrderList",value:function(e){var t=this,s=e.skip||0,a=(e.limit,this.carId),r=this["$createToast"]({time:0,txt:"加载..."});r.show(),this.$store.dispatch("getCdtOrderList",{carId:a,skip:s,start:this.start,end:this.end}).then(function(s){s.success&&(e.skip?t.orderList=t.orderList.concat(s.data.list):t.orderList=s.data.list,t.count=s.data.count),r.hide()})}},{key:"refound",value:function(e,t){var s=this,a=this["$createToast"]({time:0,txt:"退款中..."});a.show(),this.$store.dispatch("refound",{orderInfo:e}).then(function(e){if(e.success){s.$set(s.orderList[t],"hide",!0),a.hide();var r=s.$createToast({time:1e3,txt:"退款成功！",type:"txt"});r.show()}})}},{key:"pageTurning",value:function(){if(this.showMore){this.page++;var e=(this.page-1)*this.limit;this.getOrderList({skip:e})}}},{key:"orderChecked",value:function(e){var t=e.split("@");this.selectNum+=parseInt(t[1]),this.actions[0].text="已选择："+this.selectNum+"人"}},{key:"orderCancelChecked",value:function(e){var t=e.split("@");this.selectNum-=parseInt(t[1]),this.actions[0].text="已选择："+this.selectNum+"人"}},{key:"clickHandler",value:function(e){"distributionOrder"===e.action?this.distributionOrder():"selectCar"===e.action?this.selectCar():"cdtHandle"===e.action&&this.cdtHandle()}},{key:"cdtHandle",value:function(){var e=this,t=this["$createToast"]({time:0,txt:"处理中..."});t.show(),this.$store.dispatch("cdtHandle",{carId:this.carId}).then(function(s){if(s.success){var a=e.$createToast({time:1e3,txt:"候补转单已执行，请稍后查看！",type:"txt"});a.show()}t.hide()})}},{key:"selectCar",value:function(){this.getCarList({})}},{key:"distributionOrder",value:function(){if(this.checkList.length<=0){var e=this.$createToast({time:1e3,txt:"请选择订单",type:"txt"});e.show()}else{if(!this.selectCarId){var t=this.$createToast({time:1e3,txt:"请选择要分配的车辆",type:"txt"});return t.show(),!1}this.orderAllocation()}}},{key:"getCarList",value:function(e){var t=this,s=e.skip||0,a=e.limit||10,r=(this.fleetId,this["$createToast"]({time:0,txt:"加载..."}));r.show(),console.log(this.fleetId,"fleetId"),this.$store.dispatch("getCarList",{fleetId:this.fleetId,skip:s,limit:a}).then(function(e){e.success&&(t.drawerdata[0]?t.drawerdata=e.data.list:t.drawerdata=t.drawerdata.concat(e.data.list),t.count=e.data.count,t.$refs.drawer.show()),r.hide()})}},{key:"drawerSelect",value:function(e){this.selectCarId=e.id,this.actions[1].text=e.licensePlate?"车牌："+e.licensePlate:"车牌：未知",this.$refs.drawer.hide()}},{key:"resetComponentInfo",value:function(){this.page=1,this.count=0,this.orderList=[],this.selectCarId="",this.actions[1].text="请选车辆",this.actions[0].text="已选择：0人"}},{key:"orderAllocation",value:function(){var e=this;if(!(this.checkList.length<=0)&&this.selectCarId){var t=this["$createToast"]({time:0,txt:"订单分配中..."});t.show(),this.$store.dispatch("orderAllocation",{orderList:this.checkList,toCarId:this.selectCarId,carId:this.carId}).then(function(s){if(s.success){var a=e.$createToast({time:1e3,txt:"分配成功！",type:"txt"});a.show(),e.resetComponentInfo(),e.getOrderList({})}t.hide()})}}},{key:"screenClick",value:function(){this.getOrderList({})}},{key:"screenOpen",value:function(){this.openScreen=!this.openScreen}},{key:"screenReset",value:function(){this.start="",this.end=""}},{key:"showMore",get:function(){return Math.ceil(this.count/this.limit)>=this.page+1}},{key:"carId",get:function(){return this.$route.query.carId}},{key:"fleetId",get:function(){return this.$route.query.fleetId}}]),t}(d["c"]);Object(u["a"])([Object(d["b"])({default:"default value"})],p.prototype,"propB",void 0),p=Object(u["a"])([Object(d["a"])({components:{HelloWorld:h["a"],Page:v["a"]}})],p);var b=p,f=b,k=(s("1e42"),s("2877")),_=Object(k["a"])(f,a,r,!1,null,null,null);t["default"]=_.exports},fdab:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"hello"},[s("h1",[e._v(e._s(e.msg))]),e._m(0),s("h3",[e._v("Installed CLI Plugins")]),e._m(1),s("h3",[e._v("Essential Links")]),e._m(2),s("h3",[e._v("Ecosystem")]),e._m(3)])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("\n    For a guide and recipes on how to configure / customize this project,"),s("br"),e._v("\n    check out the\n    "),s("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-typescript",target:"_blank",rel:"noopener"}},[e._v("typescript")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),s("li",[s("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),s("li",[s("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),s("li",[s("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),s("li",[s("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),s("li",[s("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),s("li",[s("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),s("li",[s("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],i=s("d225"),c=s("308d"),n=s("6bb5"),o=s("4e2b"),l=s("9ab4"),u=s("60a3"),d=function(e){function t(){return Object(i["a"])(this,t),Object(c["a"])(this,Object(n["a"])(t).apply(this,arguments))}return Object(o["a"])(t,e),t}(u["c"]);Object(l["a"])([Object(u["b"])()],d.prototype,"msg",void 0),d=Object(l["a"])([u["a"]],d);var h=d,v=h,p=(s("170f"),s("2877")),b=Object(p["a"])(v,a,r,!1,null,"13913fa2",null);t["a"]=b.exports}}]);
//# sourceMappingURL=cdtEditor.9e5498d6.js.map