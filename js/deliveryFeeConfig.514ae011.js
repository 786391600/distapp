(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["deliveryFeeConfig"],{"07e8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cube-page",class:e.type},[a("header",{staticClass:"header"},[a("h1",[e._v(e._s(e.title))]),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:e.back}}),a("div",{staticClass:"header-edit"},[e._t("edit")],2)]),a("div",{class:{wrapper:!0,isWhite:"white"===e.type}},[a("main",{staticClass:"content"},[e._t("content",[e._v(e._s(e.content))])],2)])])},s=[],n=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"back",value:function(){this.$router.go(-1)}},{key:"created",value:function(){console.log("创建page ===")}}]),t}(u["c"]);Object(d["a"])([Object(u["b"])()],b.prototype,"msg",void 0),Object(d["a"])([Object(u["b"])({default:"",required:!0})],b.prototype,"title",void 0),Object(d["a"])([Object(u["b"])({default:""})],b.prototype,"type",void 0),Object(d["a"])([Object(u["b"])({default:""})],b.prototype,"desc",void 0),Object(d["a"])([Object(u["b"])({default:""})],b.prototype,"content",void 0),Object(d["a"])([Object(u["b"])({default:!0})],b.prototype,"isBack",void 0),b=Object(d["a"])([Object(u["a"])({})],b);var p=b,f=p,v=(a("2de2"),a("2877")),h=Object(v["a"])(f,i,s,!1,null,"75d201ee",null);t["a"]=h.exports},"2de2":function(e,t,a){"use strict";var i=a("4867"),s=a.n(i);s.a},"35c0":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade"}},[e.visible?a("div",{staticClass:"edit-box"},[e._t("default")],2):e._e()])},s=[],n=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"mounted",value:function(){}},{key:"hide",value:function(){this.$emit("update:visible",!1)}}]),t}(u["c"]);Object(d["a"])([Object(u["b"])({default:!1})],b.prototype,"visible",void 0),b=Object(d["a"])([Object(u["a"])({components:{}})],b);var p=b,f=p,v=(a("fa15"),a("2877")),h=Object(v["a"])(f,i,s,!1,null,"d5ca93a2",null);t["a"]=h.exports},"3f3a":function(e,t,a){"use strict";var i=a("4ecb"),s=a.n(i);s.a},4867:function(e,t,a){},"4ecb":function(e,t,a){},"51f3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-box"},e._l(e.list,function(t,i){return a("div",{key:i,staticClass:"box",on:{click:function(a){return e.boxClick(t.action)}}},[t.icon?a("i",{class:["iconfont",t.icon]}):a("span",[e._v(e._s(t.text))])])}),0)},s=[],n=a("d225"),r=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),b=function(e){function t(){return Object(n["a"])(this,t),Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(r["a"])(t,[{key:"boxClick",value:function(e){this.$emit("click",e)}}]),t}(u["c"]);Object(d["a"])([Object(u["b"])()],b.prototype,"list",void 0),b=Object(d["a"])([u["a"]],b);var p=b,f=p,v=(a("b493"),a("2877")),h=Object(v["a"])(f,i,s,!1,null,"1bd23a4e",null);t["a"]=h.exports},"98d6":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page",{attrs:{title:e.pageTitle}},[a("div",{staticClass:"edit",attrs:{slot:"edit"},slot:"edit"}),a("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"shop-admin-box"},[a("cube-form",{ref:"editForm",attrs:{model:e.model,"immediate-validate":!1,options:e.options},on:{validate:e.validateHandler,submit:e.submitHandler,reset:e.resetHandler}},[a("cube-form-group",{attrs:{legend:"骑手费用设置"}},[e._l(e.fields,function(e,t){return a("cube-form-item",{key:t,attrs:{field:e}})}),"ladder"===e.model.drawmode?a("div",{staticClass:"ladder"},[e._l(e.ladder,function(t,i){return a("div",{key:i,staticClass:"ladder-box"},[a("span",[a("cube-input",{attrs:{min:0},model:{value:t.section[0],callback:function(a){e.$set(t.section,0,a)},expression:"lItem.section[0]"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("价格-大于等于")])])],1),a("span",[a("cube-input",{attrs:{min:0},model:{value:t.section[1],callback:function(a){e.$set(t.section,1,a)},expression:"lItem.section[1]"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("小于")])])],1),a("span",[a("cube-input",{attrs:{min:0},model:{value:t.fee,callback:function(a){e.$set(t,"fee",a)},expression:"lItem.fee"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("抽成")])])],1),a("span",{on:{click:function(t){return e.deleteLadder(i)}}},[e._v("删除")])])}),a("cube-button",{attrs:{inline:!0},on:{click:e.addLadder}},[e._v("新增阶梯")])],2):e._e(),"fixed"===e.model.drawmode?a("div",{staticClass:"ladder"},[a("cube-input",{model:{value:e.fixed.value,callback:function(t){e.$set(e.fixed,"value",t)},expression:"fixed.value"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("固定费用")])])],1):e._e(),"percentage"===e.model.drawmode?a("div",{staticClass:"ladder"},[a("cube-input",{attrs:{type:"text"},model:{value:e.percentage.value,callback:function(t){e.$set(e.percentage,"value",t)},expression:"percentage.value"}},[a("div",{attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1):e._e(),"bisection"===e.model.drawmode?a("div",{staticClass:"ladder"},[a("div",{staticClass:"ladder-box"},[a("span",[a("cube-input",{attrs:{type:"number",min:0},model:{value:e.bisection.number,callback:function(t){e.$set(e.bisection,"number",t)},expression:"bisection.number"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("等分价格")])])],1),a("span",[a("cube-input",{model:{value:e.bisection.fee,callback:function(t){e.$set(e.bisection,"fee",t)},expression:"bisection.fee"}},[a("div",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("抽成")])])],1)])]):e._e(),e._l(e.savefields,function(e,t){return a("cube-form-item",{key:t,attrs:{field:e}})})],2)],1)],1)])])},s=[],n=a("7618"),r=(a("c5f6"),a("d263"),a("d225")),o=a("b0b4"),c=a("308d"),l=a("6bb5"),d=a("4e2b"),u=a("9ab4"),b=a("60a3"),p=a("07e8"),f=a("51f3"),v=a("35c0"),h=a("c88e"),m=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.showEditbox=!1,e.showAddNav=!1,e.pageTitle="骑手费用设置",e.data=[],e.currentIndex=0,e.modelIndex=0,e.headImgList=[],e.model={drawmode:"ladder"},e.imageList=[],e.isEdit=!1,e.fields=[{type:"radio-group",label:"收取规则",modelKey:"drawmode",props:{options:[{label:"固定费用",value:"fixed"},{label:"阶梯设置",value:"ladder"}]},rules:{required:!0},messages:{required:"必须选择一种抽成方式"}}],e.ladder=[],e.fixed={value:0},e.percentage={value:0},e.bisection={number:0,fee:0},e.savefields=[{type:"submit",label:"保存"}],e.options={scrollToInvalidField:!0,layout:"classic"},e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"created",value:function(){var e=Object(h["a"])(this.$route.params);this.pageTitle=e.title,this.initConfig(e),this.headImgList=[e.headImg]}},{key:"addLadder",value:function(){this.ladder.push({section:[0,0],fee:0})}},{key:"resetHandler",value:function(){this.$emit("cancel")}},{key:"submitHandler",value:function(e){var t=this;e.preventDefault();var a=this.model.drawmode,i={type:a,value:null};if("ladder"===a){var s=this.ladderValidate();if(!s)return}else if("fixed"===a){if(this.fixed.value=Number(this.fixed.value),0>this.fixed.value||isNaN(this.fixed.value)){var r=this.$createToast({txt:"固定值需大于等于0",type:"error"});return void r.show()}}else if("percentage"===a){if(this.percentage.value=Number(this.percentage.value),console.log(Object(n["a"])(this.percentage.value),"this.percentage.valueppp"),0>this.percentage.value||this.percentage.value>100||isNaN(this.percentage.value)){var o=this.$createToast({txt:"百分值需大于等于0小于等于100",type:"error"});return void o.show()}}else if("bisection"===a){if(this.bisection.number<=0){var c=this.$createToast({txt:"等分值需大于0",type:"error"});return void c.show()}if(this.bisection.fee=Number(this.bisection.fee),0>this.bisection.fee||isNaN(this.bisection.fee)){var l=this.$createToast({txt:"等分抽成需大于等于0",type:"error"});return void l.show()}}i.value=this[a];var d={tApConfig:i};this.$store.dispatch("updateShopInfoByObj",{shopId:this.shopId,value:{tApConfig:i}}).then(function(e){e.success&&t.$createDialog({type:"alert",content:"保存成功",onConfirm:function(e){t.$router.push({name:"businessManagement",params:{id:t.shopId,oprate:"update",data:d}})}}).show()})}},{key:"ladderValidate",value:function(){var e=this;this.ladder=this.ladder.map(function(e){return{section:[isNaN(Number(e.section[0]))?0:Number(e.section[0]),isNaN(Number(e.section[1]))?0:Number(e.section[1])],fee:isNaN(Number(e.fee))?0:Number(e.fee)}});var t=!0;if(this.ladder.length<=0){t=!1;var a=this.$createToast({txt:"请设置阶梯",type:"error"});a.show()}else{var i;this.ladder.some(function(a){if(i){if(a.section[0]!==i[1]){t=!1;var s=e.$createToast({txt:"后一阶梯最小值需等于前一个阶梯最大值",type:"error"});return s.show(),!0}i=a.section}else if(i=a.section,0!==i[0]){t=!1;var n=e.$createToast({txt:"阶梯收费需要从0开始",type:"error"});return n.show(),!0}if(i[1]<=i[0]){t=!1;var r=e.$createToast({txt:"阶梯收费结束费用需大于起始费用",type:"error"});return r.show(),!0}})}return t}},{key:"showToastType",value:function(){var e=this.$createToast({txt:"保存成功",type:"correct"});e.show()}},{key:"deleteLadder",value:function(e){this.ladder.splice(e,1)}},{key:"initConfig",value:function(e){var t="";e&&e.tApConfig?(t=e.tApConfig.type,this[t]=e.tApConfig.value):t="ladder",this.model={drawmode:t}}},{key:"shopId",get:function(){return this.$route.params.id}},{key:"shopName",get:function(){return this.$route.query.shopName}},{key:"schoolInfo",get:function(){return this.$store.state.schoolInfo}}]),t}(b["c"]);m=Object(u["a"])([Object(b["a"])({components:{page:p["a"],rightBox:f["a"],editBox:v["a"]}})],m);var y=m,j=y,O=(a("3f3a"),a("2877")),g=Object(O["a"])(j,i,s,!1,null,null,null);t["default"]=g.exports},a387:function(e,t,a){},b493:function(e,t,a){"use strict";var i=a("a387"),s=a.n(i);s.a},c88e:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var i=a("7618");a("3b2b"),a("a481");var s=function e(t){var a;if("object"===Object(i["a"])(t))if(null===t)a=null;else if(t instanceof Date)a=t;else if(t instanceof Array){a=[];for(var s=0,n=t.length;s<n;s++)a.push(e(t[s]))}else for(var r in a={},t)a[r]=e(t[r]);else a=t;return a}},e835:function(e,t,a){},fa15:function(e,t,a){"use strict";var i=a("e835"),s=a.n(i);s.a}}]);
//# sourceMappingURL=deliveryFeeConfig.514ae011.js.map