(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["line"],{"07e8":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cube-page",class:t.type},[i("header",{staticClass:"header"},[i("h1",[t._v(t._s(t.title))]),i("i",{directives:[{name:"show",rawName:"v-show",value:t.isBack,expression:"isBack"}],staticClass:"cubeic-back",on:{click:t.back}}),i("div",{staticClass:"header-edit"},[t._t("edit")],2)]),i("div",{class:{wrapper:!0,isWhite:"white"===t.type}},[i("section",{directives:[{name:"show",rawName:"v-show",value:t.desc,expression:"desc"}],staticClass:"desc"},[t._t("desc",[t._v(t._s(t.desc))])],2),i("main",{staticClass:"content"},[t._t("content",[t._v(t._s(t.content))])],2)])])},s=[],c=i("d225"),r=i("b0b4"),n=i("308d"),o=i("6bb5"),u=i("4e2b"),l=i("9ab4"),p=i("60a3"),d=function(t){function e(){return Object(c["a"])(this,e),Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(r["a"])(e,[{key:"back",value:function(){this.$router.back()}}]),e}(p["c"]);Object(l["a"])([Object(p["b"])()],d.prototype,"msg",void 0),Object(l["a"])([Object(p["b"])({default:"",required:!0})],d.prototype,"title",void 0),Object(l["a"])([Object(p["b"])({default:""})],d.prototype,"type",void 0),Object(l["a"])([Object(p["b"])({default:""})],d.prototype,"desc",void 0),Object(l["a"])([Object(p["b"])({default:""})],d.prototype,"content",void 0),Object(l["a"])([Object(p["b"])({default:!0})],d.prototype,"isBack",void 0),d=Object(l["a"])([p["a"]],d);var v=d,b=v,f=(i("ca73"),i("2877")),h=Object(f["a"])(b,a,s,!1,null,"0717ebb4",null);e["a"]=h.exports},1536:function(t,e,i){"use strict";var a=i("6963"),s=i.n(a);s.a},"2b1f":function(t,e,i){},"3a45":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"page-move"}},[i("router-view",{staticClass:"cube-view"})],1)},s=[],c={},r=c,n=(i("72ee"),i("2877")),o=Object(n["a"])(r,a,s,!1,null,null,null);e["a"]=o.exports},"4a43":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("page",{attrs:{type:"form-def",title:t.title,isBack:!0}},[i("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"list"},[t._l(t.carList,function(e,a){return i("div",{key:a,staticClass:"list-item"},[i("div",{staticClass:"list-item-title"},[t._v(t._s(e.start)+" - "+t._s(e.end))]),i("div",{staticClass:"list-item-content"},[t._v("票价：￥"+t._s(e.price))]),i("div",{staticClass:"oprate oprate-warp"},[i("div",{staticClass:"btn",on:{click:function(i){return t.editPrice(e)}}},[t._v("\r\n                 票价设置\r\n              ")])])])}),i("cube-button",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"btn",on:{click:t.pageTurning}},[t._v("查看更多")]),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.showMore,expression:"!showMore"}],staticClass:"noMore"},[t._v("没有更多了")])],2),i("pageView")],1)])},s=[],c=(i("c5f6"),i("d225")),r=i("b0b4"),n=i("308d"),o=i("6bb5"),u=i("4e2b"),l=i("9ab4"),p=i("60a3"),d=i("07e8"),v=i("3a45"),b=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(n["a"])(this,Object(o["a"])(e).apply(this,arguments)),t.carList=[],t.page=1,t.limit=10,t.count=0,t.showMore=!0,t}return Object(u["a"])(e,t),Object(r["a"])(e,[{key:"created",value:function(){this.carList=[],this.fleetId=this.$route.query.fleetId,this.title=this.$route.query.title,this.getCarList({})}},{key:"getCarList",value:function(t){var e=this,i=t.skip||0,a=t.limit||10,s=this.fleetId,c=this["$createToast"]({time:0,txt:"加载..."});c.show(),this.$store.dispatch("getLineListByFleetId",{fleetId:s,skip:i,limit:a}).then(function(t){t.success&&(t.data.list.length<10?e.showMore=!1:e.showMore=!0,e.carList=e.carList.concat(t.data.list)),c.hide()})}},{key:"pageTurning",value:function(){if(this.showMore){this.page++;var t=(this.page-1)*this.limit;this.getCarList({skip:t})}}},{key:"editPrice",value:function(t){var e=this,i=t.price;this.$createDialog({type:"prompt",title:"".concat(t.start,"-").concat(t.end),prompt:{value:i,placeholder:"请输入"},onConfirm:function(a,s){if(s!==i){var c=Number(s);if(isNaN(c)||c<=0){var r=e["$createToast"]({time:3e3,txt:"请输入正确的价格",type:"txt"});r.show()}else e.updateLineInfoByQuery({fleet:t.fleet,id:t.id},{price:c},function(){var i=e.carList.map(function(e){return e.id===t.id&&(e.price=c),e});e.$set(e,"carList",i)})}}}).show()}},{key:"carrierConfig",value:function(t){var e=this,i=t.carrier||"";this.$createDialog({type:"prompt",title:"承运方设置",prompt:{value:i,placeholder:"请输入"},onConfirm:function(a,s){s!==i&&e.updateLineInfoByQuery({fleet:t.fleet,start:t.start},{carrier:s},function(){var i=e.carList.map(function(e){return e.start===t.start&&(e.carrier=s),e});e.$set(e,"carList",i)})}}).show()}},{key:"updateLineInfoByQuery",value:function(t,e,i){var a=this;this.$store.dispatch("updateLineInfoByQuery",{query:t,set:e}).then(function(t){if(t.success){var e=a["$createToast"]({time:3e3,txt:"更新成功",type:"txt"});e.show(),i()}})}}]),e}(p["c"]);Object(l["a"])([Object(p["b"])({default:"default value"})],b.prototype,"propB",void 0),b=Object(l["a"])([Object(p["a"])({components:{Page:d["a"],pageView:v["a"]}})],b);var f=b,h=f,w=(i("1536"),i("2877")),y=Object(w["a"])(h,a,s,!1,null,null,null);e["default"]=y.exports},6963:function(t,e,i){},"72ee":function(t,e,i){"use strict";var a=i("2b1f"),s=i.n(a);s.a},b13e:function(t,e,i){},ca73:function(t,e,i){"use strict";var a=i("b13e"),s=i.n(a);s.a}}]);
//# sourceMappingURL=line.453097dd.js.map