{"version":3,"sources":["webpack:///./src/views/notice/index.vue?02f8","webpack:///./src/views/notice/index.vue?129f","webpack:///./src/views/notice/index.vue?1d67","webpack:///./src/views/notice/index.vue","webpack:///./src/views/notice/index.vue?74e6","webpack:///./src/views/notice/index.vue?ea47"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","houseOptions","placeholder","autoPop","disabled","on","houseChange","model","value","callback","$$v","houseId","expression","_l","item","_v","_s","_f","time","details","showMoreClick","_e","isShowMore","staticRenderFns","page","noticeList","listData","pageInit","result","validity","valid","console","log","dirty","firstInvalidFieldIndex","query","$route","code","toast","txt","show","$store","dispatch","then","response","success","data","openid","$router","replace","path","jump","sessionId","commit","userInfo","getHouseList","hide","state","getBindingInfo","list","id","getNoticeList","info","houseList","forEach","obj","houseInfo","getHouseInfo","accountId","length","concat","text","account_info","name","build_info","unitNum","floorNum","roomNum","default","components","HelloWorld","filters","getFormatDate","date","Date","getFullYear","getMonth","getDate","component"],"mappings":"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","file":"js/notice.4a0205d5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1117b7ae&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1117b7ae&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"repair\"},[_c('div',{staticClass:\"swipe-wrapper\"},[_c('div',{staticClass:\"address\"},[_c('div',{staticClass:\"info\"},[_c('i',{staticClass:\"iconfont iconxiaoqu1\"}),_c('cube-select',{attrs:{\"title\":_vm.title,\"options\":_vm.houseOptions,\"placeholder\":_vm.placeholder,\"auto-pop\":_vm.autoPop,\"disabled\":_vm.disabled},on:{\"change\":_vm.houseChange},model:{value:(_vm.houseId),callback:function ($$v) {_vm.houseId=$$v},expression:\"houseId\"}})],1)]),_c('div',{staticClass:\"repairList\"},[_vm._l((_vm.noticeList),function(item){return _c('div',{staticClass:\"repairList-box\"},[_c('div',{staticClass:\"repairList-box-head\"},[_vm._v(_vm._s(_vm._f(\"getFormatDate\")(item.time)))]),_c('div',{staticClass:\"repairList-box-box\"},[_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"公告标题\")]),_c('span',[_vm._v(_vm._s(item.title))])]),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"公告时间\")]),_c('span',[_vm._v(_vm._s(_vm._f(\"getFormatDate\")(item.time)))])]),_c('div',[_c('span',{staticClass:\"title\"},[_vm._v(\"公告内容\")]),_c('span',[_vm._v(_vm._s(item.details))])])])])}),(_vm.isShowMore)?_c('div',{staticClass:\"more\",on:{\"click\":_vm.showMoreClick}},[_vm._v(\"加载更多\")]):_vm._e(),(!_vm.isShowMore)?_c('div',{staticClass:\"more\"},[_vm._v(\"没有数据了\")]):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator'\r\nimport HelloWorld from '@/components/HelloWorld.vue' // @ is an alias to /src\r\nimport wx from 'weixin-js-sdk'\r\nimport { formatDate } from '@/until/index'\r\n\r\n@Component({\r\n  components: {\r\n    HelloWorld\r\n  },\r\n  filters: {\r\n    getFormatDate (date: any) {\r\n      return new Date(date).getFullYear() + '年' + (new Date(date).getMonth() + 1) + '月' + new Date(date).getDate() + '号'\r\n    }\r\n  }\r\n})\r\nexport default class Home extends Vue {\r\n  $createDialog : any\r\n  $createToast : any\r\n\r\n  houseId = ''\r\n  page = 1\r\n  isShowMore = true\r\n  noticeList = []\r\n  listData = []\r\n\r\n  activated () {\r\n    // this.getWeiXinConfig()\r\n    this.pageInit()\r\n  }\r\n\r\n  @Prop({ default: 'default value' }) readonly propB!: string\r\n\r\n  validateHandler (result : any) {\r\n    this.validity = result.validity\r\n    this.valid = result.valid\r\n    console.log(result)\r\n    console.log('validity', result.validity, result.valid, result.dirty, result.firstInvalidFieldIndex)\r\n  }\r\n  getBindingInfo () {\r\n    let query = this.$route.query\r\n    if (query.code) {\r\n      const toast = this['$createToast']({\r\n        time: 0,\r\n        txt: '数据获取中...'\r\n      })\r\n      toast.show()\r\n      this.$store.dispatch('getCodeInfo', { code: query.code }).then((response) => {\r\n        if (response.success) {\r\n          if (response.data.openid) {\r\n            this.openid = response.data.openid\r\n            this.$router.replace({ path: '/login', query: { openid: response.data.openid, jump: '/home' } })\r\n          } else if (response.data.sessionId) {\r\n            this.$store.commit('SET_SESSION_ID', response.data.sessionId)\r\n            this.$store.commit('SET_USER_INFO', response.data.userInfo)\r\n            this.getHouseList()\r\n          }\r\n        }\r\n        toast.hide()\r\n      })\r\n    } else {\r\n      console.log('不是微信登陆')\r\n    }\r\n  }\r\n  pageInit () {\r\n    let query = this.$route.query\r\n    if (this.$store.state.sessionId && !this.houseId) {\r\n      this.getHouseList()\r\n    } else if (query.code && !this.$store.state.sessionId) {\r\n      this.getBindingInfo()\r\n    }\r\n  }\r\n\r\n  getHouseList () {\r\n    this.$store.dispatch('getHouseList', {}).then((response) => {\r\n      if (response.data.list) {\r\n        this.listData = response.data.list\r\n        if (!this.houseId) {\r\n          this.houseId = this.listData[0].id\r\n        }\r\n        this.$store.commit('SET_HOUSE_LIST', this.listData)\r\n        this.noticeList = []\r\n        this.page = 1\r\n        this.getNoticeList()\r\n      }\r\n    })\r\n  }\r\n\r\n  get houseOptions () {\r\n    this.$store.state.houseList.forEach((obj) =>{\r\n      obj.value = obj.id\r\n      obj.text = obj.account_info[0].name + ' ' + obj.build_info[0].name + ' '+ obj.unitNum + '单元' + obj.floorNum + '层' + obj.roomNum + '室'\r\n    })\r\n    return this.$store.state.houseList\r\n  }\r\n  get userInfo () {\r\n    return this.$store.state.userInfo\r\n  }\r\n\r\n  getHouseInfo () {\r\n    let info = {}\r\n    this.$store.state.houseList.forEach((obj) =>{\r\n      if (obj.id === this.houseId) {\r\n        info = obj\r\n      }\r\n    })\r\n    return info\r\n  }\r\n\r\n  getNoticeList () {\r\n    let houseInfo = this.getHouseInfo()\r\n    console.log(houseInfo, 'houseInfo')\r\n    const toast = this['$createToast']({\r\n      time: 0,\r\n      txt: '数据获取中...'\r\n    })\r\n    toast.show()\r\n    this.$store.dispatch('getNoticeList', { page: this.page, accountId: houseInfo.accountId }).then((response) => {\r\n      if (response.success) {\r\n          if (response.data.list.length > 0) {\r\n            this.noticeList = this.noticeList.concat(response.data.list)\r\n          } else {\r\n            this.isShowMore = false\r\n          }\r\n      }\r\n      toast.hide()\r\n    })\r\n  }\r\n\r\n  showMoreClick () {\r\n    this.page++\r\n    this.getNoticeList()\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--18-2!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1117b7ae&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1117b7ae&lang=stylus&rel=stylesheet%2Fstylus&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1117b7ae\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}